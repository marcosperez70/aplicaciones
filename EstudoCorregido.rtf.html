<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLUXza5VhXqVC6o75Eld_V98);ol{margin:0;padding:0}table td,table th{padding:0}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c5{background-color:#ffffff;max-width:451pt;padding:72pt 72pt 72pt 72pt}.c4{font-weight:400;font-family:"Arial"}.c2{height:12pt}.title{padding-top:12pt;color:#000000;font-weight:700;font-size:16pt;padding-bottom:3pt;font-family:"Arial";line-height:1.0;orphans:2;widows:2;text-align:center}.subtitle{padding-top:0pt;color:#000000;font-size:12pt;padding-bottom:3pt;font-family:"Arial";line-height:1.0;orphans:2;widows:2;text-align:center}li{color:#000000;font-size:12pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:12pt;font-family:"Calibri"}h1{padding-top:12pt;color:#000000;font-weight:700;font-size:16pt;padding-bottom:3pt;font-family:"Arial";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:12pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:3pt;font-family:"Arial";line-height:1.0;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}h3{padding-top:12pt;color:#000000;font-weight:700;font-size:13pt;padding-bottom:3pt;font-family:"Arial";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:3pt;font-family:"Calibri";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#000000;font-weight:700;font-size:13pt;padding-bottom:3pt;font-family:"Calibri";line-height:1.0;font-style:italic;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:3pt;font-family:"Calibri";line-height:1.0;orphans:2;widows:2;text-align:left}</style></head><body class="c5 doc-content"><p class="c1"><span class="c0">import React, { useState, useRef, useEffect } from &#39;react&#39;;</span></p><p class="c1"><span class="c0">import ReactMarkdown from &#39;react-markdown&#39;;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">// pdfjsLib, vis, and mammoth will be loaded dynamically and accessed via window.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">// Toast Notification Component</span></p><p class="c1"><span class="c0">const Toast = ({ message, type, onDismiss }) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; useEffect(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const timer = setTimeout(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onDismiss();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }, 3000); // Auto-dismiss after 3 seconds</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return () =&gt; clearTimeout(timer);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }, [onDismiss]);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const baseStyle = &quot;fixed top-20 right-5 p-4 rounded-lg shadow-xl text-white transition-opacity duration-300 ease-in-out z-[200]&quot;; // Increased z-index for toast</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const typeStyles = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; success: &quot;bg-green-500&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; error: &quot;bg-red-500&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; info: &quot;bg-blue-500&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; warning: &quot;bg-yellow-500 text-black&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`${baseStyle} ${typeStyles[type] || typeStyles.info}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {message}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={onDismiss} className=&quot;ml-4 font-bold text-lg leading-none&quot;&gt;&amp;times;&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">const descriptionModalStyles = `</span></p><p class="c1"><span class="c0">&lt;style&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content { font-family: &#39;Inter&#39;, sans-serif; color: #334155; line-height: 1.6; padding: 0.5rem; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content h2 { color: #1e40af; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.75rem; border-bottom: 2px solid #93c5fd; padding-bottom: 0.25rem; font-size: 1.2rem; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content p { margin-bottom: 1rem; color: #475569; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content ul { list-style-type: none; padding-left: 0; margin-bottom: 1rem; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content &gt; ul &gt; li, .desc-modal-content &gt; div &gt; ul &gt; li { /* Direct children li of main ul or div &gt; ul */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; background-color: #e0f2fe; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; padding: 0.75rem 1rem; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; margin-bottom: 0.5rem; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; border-radius: 0.5rem; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; border-left: 4px solid #3b82f6; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; color: #0f172a; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content li strong { color: #1e3a8a; } /* Applied via dangerouslySetInnerHTML */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content .desc-tab-button-like { display: inline-block; background-color: #3b82f6; color: white; padding: 0.3rem 0.6rem; border-radius: 0.375rem; font-size: 0.875rem; margin-right: 0.5rem; margin-bottom: 0.5rem; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; /* Nested ul specific style */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content ul ul { margin-top: 0.5rem; margin-bottom: 0; padding-left: 1rem; } /* Add padding for nesting */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; .desc-modal-content ul ul li { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; background-color: #cfeafe; /* Slightly different bg for nested items */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; border-left-color: #2563eb; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; padding: 0.6rem 0.8rem;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;.desc-modal-content ul ul ul li { /* For third-level nesting if any */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; background-color: #addcfe;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; border-left-color: #1d4ed8;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&lt;/style&gt;</span></p><p class="c1"><span class="c0">`;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">// Base UI texts in Spanish (or any source language)</span></p><p class="c1"><span class="c0">const baseUiTexts = {</span></p><p class="c1"><span class="c0">&nbsp; appTitle: &quot;V Asistente de Estudio Inteligente&quot;,</span></p><p class="c1"><span class="c0">&nbsp; tabContentTools: &quot;Contenido y Herramientas&quot;,</span></p><p class="c1"><span class="c0">&nbsp; tabPractice: &quot;Pr&aacute;ctica Guiada&quot;,</span></p><p class="c1"><span class="c0">&nbsp; tabReport: &quot;Informe y reinicio&quot;,</span></p><p class="c1"><span class="c0">&nbsp; contentToolsTitle: &quot;Configuraci&oacute;n y Carga de Contenido&quot;,</span></p><p class="c1"><span class="c0">&nbsp; userAgeLabel: &quot;Tu Edad (Opcional):&quot;,</span></p><p class="c1"><span class="c0">&nbsp; userAgePlaceholder: &quot;Ej. 15&quot;,</span></p><p class="c1"><span class="c0">&nbsp; interactionLanguageLabel: &quot;Idioma de interacci&oacute;n con la IA:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; interactionLanguagePlaceholder: &quot;ej. espa&ntilde;ol, catal&aacute;n&quot;,</span></p><p class="c1"><span class="c0">&nbsp; translateInterfaceButton: &quot;Traducir tambi&eacute;n la interfaz (opcional)&quot;,</span></p><p class="c1"><span class="c0">&nbsp; translatingInterfaceButton: &quot;Traduciendo Interfaz...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; howToUseButton: &quot;&#8505;&#65039; &iquest;C&oacute;mo usar esta App? / Ver Descripci&oacute;n&quot;,</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; inputMethodDocTitle: &quot;Opci&oacute;n 1: Cargar un Documento&quot;,</span></p><p class="c1"><span class="c0">&nbsp; loadDocumentLabel: &quot;Archivo (PDF, TXT, MD, DOCX):&quot;,</span></p><p class="c1"><span class="c0">&nbsp; dropDocumentPlaceholder: &quot;Arrastra y suelta un documento aqu&iacute;, o haz clic para seleccionar.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; inputMethodTextTitle: &quot;Opci&oacute;n 2: Pegar Texto Directamente&quot;,</span></p><p class="c1"><span class="c0">&nbsp; pasteTextLabel: &quot;Contenido Textual:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; pasteTextPlaceholder: &quot;Pega aqu&iacute; tu material de estudio... (El contenido de un documento cargado tambi&eacute;n aparecer&aacute; aqu&iacute;)&quot;,</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; inputMethodImageTitle: &quot;Opci&oacute;n 3: Cargar una Imagen&quot;,</span></p><p class="c1"><span class="c0">&nbsp; loadImageLabel: &quot;Archivo de Imagen:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; dropImagePlaceholder: &quot;Arrastra y suelta una imagen aqu&iacute;, o haz clic para seleccionar.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; documentLoadedMsg: &quot;Documento cargado.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; imageErrorPlaceholder: &quot;Error Imagen&quot;,</span></p><p class="c1"><span class="c0">&nbsp; canLoadTextAndImage: &quot;Puedes usar un documento o texto pegado, y complementarlo con una imagen si lo deseas.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; contentToolsHeadline: &quot;Herramientas de An&aacute;lisis de Contenido:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; summarizeButton: &quot;&#10024; Resumir&quot;,</span></p><p class="c1"><span class="c0">&nbsp; summarizingButton: &quot;Resumiendo...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; faqButton: &quot;&#10024; FAQ&quot;,</span></p><p class="c1"><span class="c0">&nbsp; generatingFaqButton: &quot;Generando FAQ...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; flashcardsButton: &quot;&#10024; Flashcards&quot;,</span></p><p class="c1"><span class="c0">&nbsp; creatingFlashcardsButton: &quot;Creando Flashcards...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; conceptMapButton: &quot;&#10024; Mapa Conceptual&quot;,</span></p><p class="c1"><span class="c0">&nbsp; generatingMapButton: &quot;Generando Mapa...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; guidedPracticeTitle: &quot;Pr&aacute;ctica Guiada&quot;,</span></p><p class="c1"><span class="c0">&nbsp; questionTypeLabel: &quot;Tipo de Pregunta:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; studyModeLabel: &quot;Modo de Estudio:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; generateQuestionButton: &quot;Generar Nueva Pregunta&quot;,</span></p><p class="c1"><span class="c0">&nbsp; generatingQuestionButton: &quot;Generando...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; yourAnswerLabel: &quot;Tu Respuesta:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; yourAnswerPlaceholder: &quot;Escribe tu respuesta aqu&iacute;...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; checkAnswerButton: &quot;Comprobar Respuesta&quot;,</span></p><p class="c1"><span class="c0">&nbsp; evaluatingButton: &quot;Evaluando...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; explainMoreButton: &quot;&#10024; Explicar m&aacute;s&quot;,</span></p><p class="c1"><span class="c0">&nbsp; explainingButton: &quot;Explicando...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; createAnalogiesButton: &quot;&#10024; Crear Analog&iacute;as&quot;,</span></p><p class="c1"><span class="c0">&nbsp; creatingAnalogiesButton: &quot;Creando Analog&iacute;as...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; correctLabel: &quot;Correctas:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; incorrectLabel: &quot;Incorrectas:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; reportTitle: &quot;Informe y reinicio&quot;,</span></p><p class="c1"><span class="c0">&nbsp; generateReportButton: &quot;Generar/Actualizar Informe&quot;,</span></p><p class="c1"><span class="c0">&nbsp; generatingReportButton: &quot;Generando Informe...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; reportResultsTitle: &quot;Informe de Resultados:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; studySuggestionsTitle: &quot;Sugerencias de Estudio:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; clickToGenerateReportMsg: &quot;Haz clic en el bot&oacute;n de arriba para generar tu informe.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; completeQuestionsForReportMsg: &quot;Completa algunas preguntas en la pesta&ntilde;a \&quot;Pr&aacute;ctica Guiada\&quot; para poder generar un informe.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; restartSessionButton: &quot;Reiniciar Sesi&oacute;n&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descriptionModalTitle: &quot;&#128640; Asistente de Estudio Inteligente&quot;,</span></p><p class="c1"><span class="c0">&nbsp; closeButton: &quot;Cerrar&quot;,</span></p><p class="c1"><span class="c0">&nbsp; confirmRestartMsg: &quot;&iquest;Est&aacute;s seguro de que quieres reiniciar la sesi&oacute;n? Se borrar&aacute; el progreso actual, pero la configuraci&oacute;n (idioma, edad, etc.) se mantendr&aacute;.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; yesRestartButton: &quot;S&iacute;, reiniciar&quot;,</span></p><p class="c1"><span class="c0">&nbsp; cancelButton: &quot;Cancelar&quot;,</span></p><p class="c1"><span class="c0">&nbsp; acceptButton: &quot;Aceptar&quot;,</span></p><p class="c1"><span class="c0">&nbsp; summaryModalTitle: &quot;&#10024; Resumen del Contenido&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copySummaryButton: &quot;Copiar Resumen&quot;,</span></p><p class="c1"><span class="c0">&nbsp; faqModalTitle: &quot;&#10024; Preguntas Frecuentes&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copyFaqButton: &quot;Copiar FAQs&quot;,</span></p><p class="c1"><span class="c0">&nbsp; elaborationModalTitle: &quot;&#10024; Explicaci&oacute;n Detallada&quot;,</span></p><p class="c1"><span class="c0">&nbsp; elaborationModalConceptLabel: &quot;Sobre:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copyElaborationButton: &quot;Copiar Explicaci&oacute;n&quot;,</span></p><p class="c1"><span class="c0">&nbsp; analogyModalTitle: &quot;&#10024; Analog&iacute;as para Entender Mejor&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copyAnalogiesButton: &quot;Copiar Analog&iacute;as&quot;,</span></p><p class="c1"><span class="c0">&nbsp; flashcardsModalTitle: &quot;&#10024; Flashcards&quot;,</span></p><p class="c1"><span class="c0">&nbsp; flashcardOf: &quot;Flashcard {current} de {total}&quot;, </span></p><p class="c1"><span class="c0">&nbsp; prevFlashcardButton: &quot;Anterior&quot;,</span></p><p class="c1"><span class="c0">&nbsp; shuffleFlashcardButton: &quot;Barajar&quot;,</span></p><p class="c1"><span class="c0">&nbsp; nextFlashcardButton: &quot;Siguiente&quot;,</span></p><p class="c1"><span class="c0">&nbsp; closeFlashcardsButton: &quot;Cerrar Flashcards&quot;,</span></p><p class="c1"><span class="c0">&nbsp; semanticMapModalTitle: &quot;&#10024; Mapa Conceptual Interactivo&quot;,</span></p><p class="c1"><span class="c0">&nbsp; downloadHtmlButton: &quot;Descargar HTML&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descP1: &quot;&iexcl;Bienvenido/a al Asistente de Estudio Inteligente! Esta herramienta est&aacute; dise&ntilde;ada para ayudarte a &lt;strong&gt;comprender y repasar cualquier material de estudio&lt;/strong&gt; de una forma interactiva y eficaz.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descP2: &quot;Para poderlo utilizar es necesario haber iniciado sesi&oacute;n en una cuenta de Google que permita el uso de Gemini.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descP3: &quot;Simplemente carga tu contenido (texto, PDF, DOCX o im&aacute;genes) y deja que la IA te gu&iacute;e.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descTitle2: &quot;&iquest;Para qu&eacute; sirve?&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descP4: &quot;El objetivo principal es transformar tu material de estudio en una experiencia de aprendizaje activa. En lugar de solo leer, podr&aacute;s:&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descL1I1: &quot;&#9989; Poner a prueba tu comprensi&oacute;n con preguntas generadas por IA.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descL1I2: &quot;&#128506;&#65039; Visualizar conceptos clave y sus relaciones con &lt;strong&gt;Mapas Conceptuales&lt;/strong&gt; interactivos (descargables en HTML).&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descL1I3: &quot;&#128269; Profundizar en conceptos clave con explicaciones detalladas y analog&iacute;as.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descL1I4: &quot;&#128172; Conversar con la IA sobre el contenido para aclarar dudas.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descL1I5: &quot;&#128202; Obtener un resumen de tu rendimiento y sugerencias para mejorar.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; descL1I6: &quot;&#128736;&#65039; Utilizar herramientas como res&uacute;menes autom&aacute;ticos, FAQs y flashcards.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; imageLoadedToast: &#39;Imagen &quot;{fileName}&quot; cargada.&#39;,</span></p><p class="c1"><span class="c0">&nbsp; docLoadedToast: &#39;Documento &quot;{fileName}&quot; cargado y procesado.&#39;,</span></p><p class="c1"><span class="c0">&nbsp; pdfLibNotLoadedToast: &#39;La librer&iacute;a de PDF a&uacute;n no est&aacute; cargada. Por favor, espera e int&eacute;ntalo de nuevo.&#39;,</span></p><p class="c1"><span class="c0">&nbsp; visNotLoadedToast: &#39;La librer&iacute;a para mapas conceptuales a&uacute;n no est&aacute; cargada. Por favor, espera e int&eacute;ntalo de nuevo.&#39;,</span></p><p class="c1"><span class="c0">&nbsp; mammothNotLoadedToast: &#39;La librer&iacute;a para DOCX a&uacute;n no est&aacute; cargada. Por favor, espera e int&eacute;ntalo de nuevo.&#39;,</span></p><p class="c1"><span class="c0">&nbsp; noContentToGenerateToast: &quot;Por favor, carga alg&uacute;n contenido (texto o imagen) antes de generar una pregunta.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noContentForActionToast: &quot;Por favor, carga alg&uacute;n contenido (texto o imagen) antes de realizar esta acci&oacute;n.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; questionTypeRandomToast: &quot;Tipo de pregunta aleatoria: {type}&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noQuestionToEvaluateToast: &quot;Por favor, genera una pregunta y proporciona una respuesta antes de evaluar.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noHistoryForReportToast: &quot;No hay historial de sesi&oacute;n para generar un informe.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noConceptToElaborateToast: &quot;No hay un concepto o pregunta seleccionada para elaborar.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noContentForElaborationToast: &quot;Carga contenido para tener contexto para la elaboraci&oacute;n.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noConceptForAnalogiesToast: &quot;No hay un concepto o pregunta seleccionada para generar analog&iacute;as.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noContentForAnalogiesToast: &quot;Carga contenido para tener contexto para las analog&iacute;as.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; invalidFlashcardsToast: &quot;La IA no devolvi&oacute; flashcards v&aacute;lidas. Int&eacute;ntalo de nuevo.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; errorProcessingFlashcardsToast: &quot;Error al procesar las flashcards recibidas de la IA.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noSemanticMapDataToast: &quot;La IA no devolvi&oacute; datos v&aacute;lidos para el mapa conceptual. Int&eacute;ntalo de nuevo.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; errorProcessingSemanticMapToast: &quot;Error al procesar los datos del mapa conceptual recibidos de la IA.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; sessionRestartedToast: &quot;Sesi&oacute;n reiniciada. La configuraci&oacute;n de idioma, tipo de pregunta, modo de estudio y edad se mantienen (excepto tipo de pregunta que vuelve a Aleatorio).&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copiedToClipboardSuccess: &quot;{item} copiado(s) al portapapeles!&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copiedToClipboardFallback: &quot;{item} copiado(s)! (fallback)&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copiedToClipboardError: &quot;No se pudo copiar el/la {item}.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; copiedToClipboardErrorFallback: &quot;Error al copiar el/la {item} (fallback).&quot;,</span></p><p class="c1"><span class="c0">&nbsp; noItemToCopy: &quot;No hay {item} para copiar.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; interfaceTranslationSuccess: &quot;Interfaz traducida a {language}.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; interfaceTranslationError: &quot;Error al traducir la interfaz.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; describingImageForMapToast: &quot;Describiendo imagen para el mapa conceptual...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; imageDescriptionSuccessToast: &quot;Imagen descrita. Generando mapa conceptual...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; imageDescriptionErrorToast: &quot;Error al describir la imagen para el mapa conceptual.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; qTypeRandom: &quot;Aleatorio&quot;,</span></p><p class="c1"><span class="c0">&nbsp; qTypeGeneral: &quot;General&quot;,</span></p><p class="c1"><span class="c0">&nbsp; qTypeDefinition: &quot;Definici&oacute;n&quot;,</span></p><p class="c1"><span class="c0">&nbsp; qTypeRelationship: &quot;Relaci&oacute;n entre conceptos&quot;,</span></p><p class="c1"><span class="c0">&nbsp; qTypeApplication: &quot;Aplicaci&oacute;n/Ejemplo&quot;,</span></p><p class="c1"><span class="c0">&nbsp; qTypeTrueFalse: &quot;Verdadero/Falso&quot;,</span></p><p class="c1"><span class="c0">&nbsp; qTypeMultipleChoice: &quot;Opci&oacute;n M&uacute;ltiple&quot;,</span></p><p class="c1"><span class="c0">&nbsp; studyModeRandom: &quot;Aleatorio&quot;,</span></p><p class="c1"><span class="c0">&nbsp; studyModeGuided: &quot;Guiado (progresivo)&quot;,</span></p><p class="c1"><span class="c0">&nbsp; focusModeButtonLabel: &quot;Pantalla Completa&quot;, </span></p><p class="c1"><span class="c0">&nbsp; exitFocusModeButtonLabel: &quot;Salir de Pantalla Completa&quot;, </span></p><p class="c1"><span class="c0">&nbsp; focusModeActiveToast: &quot;Pantalla completa activada.&quot;, </span></p><p class="c1"><span class="c0">&nbsp; focusModeInactiveToast: &quot;Pantalla completa desactivada.&quot;, </span></p><p class="c1"><span class="c0">&nbsp; focusModeRequestErrorToast: &quot;No es posible maximizar la aplicaci&oacute;n en este navegador.&quot;,</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">// Component for Description Modal Content</span></p><p class="c1"><span class="c0">const DescriptionModalContentComponent = ({ uiTexts }) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;desc-modal-content&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p dangerouslySetInnerHTML={{ __html: uiTexts.descP1 || baseUiTexts.descP1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p dangerouslySetInnerHTML={{ __html: uiTexts.descP2 || baseUiTexts.descP2 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p dangerouslySetInnerHTML={{ __html: uiTexts.descP3 || baseUiTexts.descP3 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;{uiTexts.descTitle2 || baseUiTexts.descTitle2}&lt;/h2&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p dangerouslySetInnerHTML={{ __html: uiTexts.descP4 || baseUiTexts.descP4 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descL1I1 || baseUiTexts.descL1I1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descL1I2 || baseUiTexts.descL1I2 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descL1I3 || baseUiTexts.descL1I3 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descL1I4 || baseUiTexts.descL1I4 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descL1I5 || baseUiTexts.descL1I5 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descL1I6 || baseUiTexts.descL1I6 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* The following section will not render if keys are missing, which is intended */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(uiTexts.descTitle3 || baseUiTexts.descTitle3) &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2&gt;{uiTexts.descTitle3 || baseUiTexts.descTitle3}&lt;/h2&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p dangerouslySetInnerHTML={{ __html: uiTexts.descP5 || baseUiTexts.descP5 }} /&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(uiTexts.descTab1Name || baseUiTexts.descTab1Name) &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span className=&quot;desc-tab-button-like&quot;&gt;{uiTexts.descTab1Name || baseUiTexts.descTab1Name}&lt;/span&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;mt-2 mb-4 ml-1&quot; dangerouslySetInnerHTML={{ __html: uiTexts.descTab1P1 || baseUiTexts.descTab1P1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul className=&quot;ml-1&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab1L1I1 || baseUiTexts.descTab1L1I1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab1L1I2 || baseUiTexts.descTab1L1I2 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab1L1I3 || baseUiTexts.descTab1L1I3 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(uiTexts.descTab1L2I1 || baseUiTexts.descTab1L2I1) &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab1L2I1 || baseUiTexts.descTab1L2I1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab1L2I2 || baseUiTexts.descTab1L2I2 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab1L2I3 || baseUiTexts.descTab1L2I3 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab1L2I4 || baseUiTexts.descTab1L2I4 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Repeat for other tabs if their main keys exist */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(uiTexts.descTab2Name || baseUiTexts.descTab2Name) &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span className=&quot;desc-tab-button-like&quot;&gt;{uiTexts.descTab2Name || baseUiTexts.descTab2Name}&lt;/span&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;mt-2 mb-4 ml-1&quot; dangerouslySetInnerHTML={{ __html: uiTexts.descTab2P1 || baseUiTexts.descTab2P1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul className=&quot;ml-1&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab2L1I1 || baseUiTexts.descTab2L1I1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab2L1I2 || baseUiTexts.descTab2L1I2 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab2L1I3 || baseUiTexts.descTab2L1I3 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab2L1I4 || baseUiTexts.descTab2L1I4 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab2L1I5 || baseUiTexts.descTab2L1I5 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(uiTexts.descTab3Name || baseUiTexts.descTab3Name) &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span className=&quot;desc-tab-button-like&quot;&gt;{uiTexts.descTab3Name || baseUiTexts.descTab3Name}&lt;/span&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;mt-2 mb-4 ml-1&quot; dangerouslySetInnerHTML={{ __html: uiTexts.descTab3P1 || baseUiTexts.descTab3P1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul className=&quot;ml-1&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab3L1I1 || baseUiTexts.descTab3L1I1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab3L1I2 || baseUiTexts.descTab3L1I2 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(uiTexts.descTab4Name || baseUiTexts.descTab4Name) &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span className=&quot;desc-tab-button-like&quot;&gt;{uiTexts.descTab4Name || baseUiTexts.descTab4Name}&lt;/span&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;mt-2 mb-4 ml-1&quot; dangerouslySetInnerHTML={{ __html: uiTexts.descTab4P1 || baseUiTexts.descTab4P1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul className=&quot;ml-1&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab4L1I1 || baseUiTexts.descTab4L1I1 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li dangerouslySetInnerHTML={{ __html: uiTexts.descTab4L1I2 || baseUiTexts.descTab4L1I2 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;mt-6 text-center text-sm text-slate-500&quot; dangerouslySetInnerHTML={{ __html: uiTexts.descP6 || baseUiTexts.descP6 }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">// Main App component</span></p><p class="c1"><span class="c0">const App = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for content and configuration</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [studyContentText, setStudyContentText] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [studyContentImage, setStudyContentImage] = useState(null); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [interactionLanguage, setInteractionLanguage] = useState(&#39;espa&ntilde;ol&#39;); // Default to Spanish for input</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [questionType, setQuestionType] = useState(baseUiTexts.qTypeRandom); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [studyMode, setStudyMode] = useState(baseUiTexts.studyModeRandom);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [userAge, setUserAge] = useState(&#39;&#39;);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for UI texts</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [uiTexts, setUiTexts] = useState(baseUiTexts);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isInterfaceTranslating, setIsInterfaceTranslating] = useState(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isInitialTranslating, setIsInitialTranslating] = useState(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [initialTranslationLanguage, setInitialTranslationLanguage] = useState(&#39;&#39;); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for quiz interaction</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [currentQuestion, setCurrentQuestion] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [currentConcept, setCurrentConcept] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [userAnswer, setUserAnswer] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [feedbackMessage, setFeedbackMessage] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isPracticeLoading, setIsPracticeLoading] = useState(false); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for library loading</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isPdfJsLoaded, setIsPdfJsLoaded] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isVisNetworkLoaded, setIsVisNetworkLoaded] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isMammothLoaded, setIsMammothLoaded] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for progress tracking</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [correctCount, setCorrectCount] = useState(0);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [incorrectCount, setIncorrectCount] = useState(0);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [sessionHistory, setSessionHistory] = useState([]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [askedQuestions, setAskedQuestions] = useState(new Set());</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [coveredConcepts, setCoveredConcepts] = useState(new Set());</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for report</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [reportContent, setReportContent] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [suggestionsContent, setSuggestionsContent] = useState(&#39;&#39;);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for custom modal (general messages)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showModal, setShowModal] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [modalMessage, setModalMessage] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [modalRequiresConfirmation, setModalRequiresConfirmation] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for Smart Summary</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [smartSummary, setSmartSummary] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showSummaryModal, setShowSummaryModal] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isSummaryLoading, setIsSummaryLoading] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for Elaborate on Concept</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [elaboratedExplanation, setElaboratedExplanation] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showElaborationModal, setShowElaborationModal] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [conceptToElaborate, setConceptToElaborate] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isElaborationLoading, setIsElaborationLoading] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State variables for FAQ</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [faqContent, setFaqContent] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showFaqModal, setShowFaqModal] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isFaqLoading, setIsFaqLoading] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for Toast Notifications</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [toast, setToast] = useState({ show: false, message: &#39;&#39;, type: &#39;info&#39; });</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for Analogies</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [analogiesContent, setAnalogiesContent] = useState(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showAnalogyModal, setShowAnalogyModal] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isAnalogyLoading, setIsAnalogyLoading] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for Flashcards</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [flashcardsData, setFlashcardsData] = useState([]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showFlashcardModal, setShowFlashcardModal] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [currentFlashcardIndex, setCurrentFlashcardIndex] = useState(0);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isFlashcardFlipped, setIsFlashcardFlipped] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isFlashcardsLoading, setIsFlashcardsLoading] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for Semantic Map</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [semanticMapData, setSemanticMapData] = useState(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showSemanticMapModal, setShowSemanticMapModal] = useState(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isSemanticMapLoading, setIsSemanticMapLoading] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for Active Tab</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [activeTab, setActiveTab] = useState(&#39;contenido&#39;);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for Description Modal</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [showDescriptionModal, setShowDescriptionModal] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // State for Focus Mode (Fullscreen)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const [isFocusMode, setIsFocusMode] = useState(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Language keywords for evaluation</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const languageKeywords = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &#39;espa&ntilde;ol&#39;: { correct: &#39;CORRECTO&#39;, incorrect: &#39;INCORRECTO&#39; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &#39;catalan&#39;: { correct: &#39;CORRECTE&#39;, incorrect: &#39;INCORRECTE&#39; }, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &#39;english&#39;: { correct: &#39;CORRECT&#39;, incorrect: &#39;INCORRECT&#39; }, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Refs</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const appRef = useRef(null); // Ref for the main app container for fullscreen</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const imageInputRef = useRef(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const documentInputRef = useRef(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const networkRef = useRef(null); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const networkInstanceRef = useRef(null); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Function to show toast notifications</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const showToast = (message, type = &#39;info&#39;) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setToast({ show: true, message, type });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Function to dismiss toast</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const dismissToast = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setToast({ show: false, message: &#39;&#39;, type: &#39;info&#39; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Dynamically load external libraries (pdf.js, vis-network.js, mammoth.js)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; useEffect(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const pdfScript = document.createElement(&#39;script&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; pdfScript.src = &#39;https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; pdfScript.async = true;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; pdfScript.onload = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (window.pdfjsLib) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; window.pdfjsLib.GlobalWorkerOptions.workerSrc = &#39;https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsPdfJsLoaded(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.log(&#39;pdf.js loaded successfully.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&#39;pdf.js did not load correctly.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.pdfLibNotLoadedToast || baseUiTexts.pdfLibNotLoadedToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; pdfScript.onerror = () =&gt; { console.error(&#39;Failed to load pdf.js script.&#39;); showToast(&#39;Error al cargar script de PDF.&#39;, &#39;error&#39;); };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.head.appendChild(pdfScript);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const visNetworkScript = document.createElement(&#39;script&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; visNetworkScript.src = &#39;https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.9/standalone/umd/vis-network.min.js&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; visNetworkScript.async = true;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; visNetworkScript.onload = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (window.vis) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsVisNetworkLoaded(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.log(&#39;vis-network.js loaded successfully.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&#39;vis-network.js did not load correctly.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.visNotLoadedToast || baseUiTexts.visNotLoadedToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; visNetworkScript.onerror = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&#39;Failed to load vis-network.js script.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;Error cr&iacute;tico al cargar script de mapas conceptuales.&#39;, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.head.appendChild(visNetworkScript);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const visNetworkCSS = document.createElement(&#39;link&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; visNetworkCSS.rel = &#39;stylesheet&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; visNetworkCSS.type = &#39;text/css&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; visNetworkCSS.href = &#39;https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.9/dist/vis-network.min.css&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.head.appendChild(visNetworkCSS);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const mammothScript = document.createElement(&#39;script&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; mammothScript.src = &#39;https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; mammothScript.async = true;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; mammothScript.onload = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (window.mammoth) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsMammothLoaded(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.log(&#39;mammoth.js loaded successfully.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&#39;mammoth.js did not load correctly.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.mammothNotLoadedToast || baseUiTexts.mammothNotLoadedToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; mammothScript.onerror = () =&gt; { console.error(&#39;Failed to load mammoth.js script.&#39;); showToast(&#39;Error al cargar script de DOCX.&#39;, &#39;error&#39;); };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.head.appendChild(mammothScript);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (document.head.contains(pdfScript)) document.head.removeChild(pdfScript);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (document.head.contains(visNetworkScript)) document.head.removeChild(visNetworkScript);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (document.head.contains(visNetworkCSS)) document.head.removeChild(visNetworkCSS);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (document.head.contains(mammothScript)) document.head.removeChild(mammothScript);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }, [uiTexts]); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Show custom modal message</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const showCustomModal = (message, requiresConfirmation = false) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setModalMessage(message);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setModalRequiresConfirmation(requiresConfirmation);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setShowModal(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle image file upload</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleImageUpload = (event) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const file = event.target.files[0];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (file) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onloadend = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyContentImage(reader.result.split(&#39;,&#39;)[1]); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showToast(uiTexts.imageLoadedToast.replace(&#39;{fileName}&#39;, file.name), &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsDataURL(file);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Unified drag over handler</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleDragOver = (event) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; event.preventDefault();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; event.stopPropagation();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; event.dataTransfer.dropEffect = &#39;copy&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle image drop</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleImageDrop = (event) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; event.preventDefault();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; event.stopPropagation();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const file = event.dataTransfer.files[0];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (file &amp;&amp; file.type.startsWith(&#39;image/&#39;)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onloadend = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyContentImage(reader.result.split(&#39;,&#39;)[1]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.imageLoadedToast.replace(&#39;{fileName}&#39;, file.name), &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsDataURL(file);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&quot;Por favor, suelta un archivo de imagen v&aacute;lido.&quot;, &#39;warning&#39;); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle document drop</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleDocumentDrop = (event) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; event.preventDefault();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; event.stopPropagation();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const file = event.dataTransfer.files[0];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (file) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; handleFileProcessing(file);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&quot;Por favor, suelta un archivo de documento v&aacute;lido (.pdf, .txt, .md, .docx).&quot;, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle document upload</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleDocumentUpload = (event) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const file = event.target.files[0];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (file) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; handleFileProcessing(file);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Process uploaded file</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleFileProcessing = async (file) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const currentLoadingSetter = setIsPracticeLoading; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setFeedbackMessage(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const fileName = file.name.toLowerCase();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let extractedText = &#39;&#39;;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (fileName.endsWith(&#39;.txt&#39;) || fileName.endsWith(&#39;.md&#39;)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onload = (e) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; extractedText = e.target.result;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyContentText(extractedText);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.docLoadedToast.replace(&#39;{fileName}&#39;, file.name), &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onerror = () =&gt; { currentLoadingSetter(false); throw new Error(&#39;Error al leer el archivo de texto.&#39;); };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsText(file);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (fileName.endsWith(&#39;.pdf&#39;)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isPdfJsLoaded || !window.pdfjsLib) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.pdfLibNotLoadedToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onload = async (e) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const arrayBuffer = e.target.result;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const pdfDocument = await window.pdfjsLib.getDocument({ data: arrayBuffer }).promise;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let fullText = &#39;&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (let i = 1; i &lt;= pdfDocument.numPages; i++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const page = await pdfDocument.getPage(i);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const textContent = await page.getTextContent();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fullText += textContent.items.map(item =&gt; item.str).join(&#39; &#39;) + &#39;\n\n&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyContentText(fullText);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.docLoadedToast.replace(&#39;{fileName}&#39;, file.name), &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (pdfError) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error processing PDF:&quot;, pdfError);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(`Error al procesar el PDF: ${pdfError.message}`, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onerror = () =&gt; { currentLoadingSetter(false); throw new Error(&#39;Error al leer el archivo PDF.&#39;); };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsArrayBuffer(file);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (fileName.endsWith(&#39;.docx&#39;)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isMammothLoaded || !window.mammoth) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.mammothNotLoadedToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onload = async (e) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const arrayBuffer = e.target.result;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const result = await window.mammoth.extractRawText({ arrayBuffer });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyContentText(result.value);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.docLoadedToast.replace(&#39;{fileName}&#39;, file.name), &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (docxError) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error processing DOCX:&quot;, docxError);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(`Error al procesar el DOCX: ${docxError.message}`, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onerror = () =&gt; { currentLoadingSetter(false); throw new Error(&#39;Error al leer el archivo DOCX.&#39;); };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsArrayBuffer(file);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;Tipo de archivo no soportado. Por favor, sube un .pdf, .txt, .md o .docx.&#39;, &#39;warning&#39;); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } catch (error) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setFeedbackMessage(`Error al procesar el archivo: ${error.message}`);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(`Error al procesar el archivo: ${error.message}`, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error processing document:&quot;, error);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Construct prompt for LLM</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const constructPrompt = (type, data = {}) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let prompt = `Responde ESTRICTA y EXCLUSIVAMENTE en el idioma: ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const currentKeywords = languageKeywords[interactionLanguage.toLowerCase()] || languageKeywords[&#39;espa&ntilde;ol&#39;];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let contextParts = []; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (type !== &#39;generateSemanticMap&#39; &amp;&amp; type !== &#39;describeImageForMap&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (studyContentText) contextParts.push({ text: `Contenido de estudio (texto): ${studyContentText}` });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (studyContentImage) contextParts.push({ inlineData: { mimeType: &quot;image/png&quot;, data: studyContentImage } });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;describeImageForMap&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (studyContentImage) contextParts.push({ inlineData: { mimeType: &quot;image/png&quot;, data: studyContentImage } });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (studyContentText) contextParts.push({ text: `Contexto textual adicional (si es relevante para la imagen): ${studyContentText}` });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (userAge &amp;&amp; !isNaN(parseInt(userAge))) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Adapta la complejidad y el lenguaje para alguien de ${userAge} a&ntilde;os, pero siempre manteniendo la respuesta en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let generationConfig = null; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let typeForPromptConstruction = questionType; </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const qTypeKey = Object.keys(uiTexts).find(k =&gt; uiTexts[k] === questionType &amp;&amp; k.startsWith(&#39;qType&#39;)) || </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Object.keys(baseUiTexts).find(k =&gt; baseUiTexts[k] === questionType &amp;&amp; k.startsWith(&#39;qType&#39;));</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (type === &#39;generateQuestion&#39; &amp;&amp; data.effectiveType) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const effectiveTypeKey = Object.keys(uiTexts).find(k =&gt; uiTexts[k] === data.effectiveType &amp;&amp; k.startsWith(&#39;qType&#39;)) ||</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Object.keys(baseUiTexts).find(k =&gt; baseUiTexts[k] === data.effectiveType &amp;&amp; k.startsWith(&#39;qType&#39;));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; typeForPromptConstruction = effectiveTypeKey ? baseUiTexts[effectiveTypeKey] : data.effectiveType; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (qTypeKey) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; typeForPromptConstruction = baseUiTexts[qTypeKey]; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (type === &#39;generateQuestion&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Genera una pregunta de comprensi&oacute;n concisa y clara sobre el contenido proporcionado.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (askedQuestions.size &gt; 0) prompt += `Aseg&uacute;rate de que la pregunta NO sea una de las siguientes: ${Array.from(askedQuestions).join(&#39;; &#39;)}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (typeForPromptConstruction === baseUiTexts.qTypeDefinition) prompt += `La pregunta debe pedir una definici&oacute;n de un concepto clave.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (typeForPromptConstruction === baseUiTexts.qTypeRelationship) prompt += `La pregunta debe pedir la relaci&oacute;n entre dos o m&aacute;s conceptos.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (typeForPromptConstruction === baseUiTexts.qTypeApplication) prompt += `La pregunta debe pedir un ejemplo o aplicaci&oacute;n de un concepto.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (typeForPromptConstruction === baseUiTexts.qTypeTrueFalse) prompt += `La pregunta debe ser una &Uacute;NICA afirmaci&oacute;n de Verdadero/Falso que el alumno debe evaluar y justificar.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (typeForPromptConstruction === baseUiTexts.qTypeMultipleChoice) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `La pregunta debe ser de opci&oacute;n m&uacute;ltiple con 3 o 4 opciones de respuesta, donde SOLO UNA opci&oacute;n es correcta. Indica claramente cu&aacute;l es la pregunta y cu&aacute;les son las opciones (por ejemplo, A, B, C, D). No indiques la respuesta correcta en la generaci&oacute;n de la pregunta.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const studyModeKey = Object.keys(uiTexts).find(k =&gt; uiTexts[k] === studyMode &amp;&amp; k.startsWith(&#39;studyMode&#39;)) ||</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Object.keys(baseUiTexts).find(k =&gt; baseUiTexts[k] === studyMode &amp;&amp; k.startsWith(&#39;studyMode&#39;));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const baseStudyMode = studyModeKey ? baseUiTexts[studyModeKey] : studyMode;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (baseStudyMode === baseUiTexts.studyModeGuided) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const coveredConceptsList = Array.from(coveredConcepts).join(&#39;, &#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Formula una pregunta sobre el siguiente concepto l&oacute;gico o una nueva secci&oacute;n del documento que a&uacute;n no se haya cubierto. Conceptos ya cubiertos: [${coveredConceptsList}]. Despu&eacute;s de la pregunta, sugiere brevemente el concepto o &aacute;rea que cubre la pregunta para que podamos registrarlo. Por ejemplo: &quot;Pregunta: [Tu pregunta] (Concepto: [Nombre del concepto])&quot;\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Recuerda: Toda la pregunta y cualquier texto adicional deben estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;evaluateAnswer&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Pregunta: &quot;${currentQuestion}&quot;\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Respuesta del alumno: &quot;${userAnswer}&quot;\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `IMPORTANTE: Tu evaluaci&oacute;n y explicaci&oacute;n DEBEN estar EXCLUSIVAMENTE en ${interactionLanguage}, sin importar el idioma en que el alumno haya respondido.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Eval&uacute;a si la respuesta del alumno es ${currentKeywords.correct} o ${currentKeywords.incorrect} bas&aacute;ndote estrictamente en el contenido proporcionado y la pregunta. Tu respuesta DEBE empezar con la palabra clave &#39;${currentKeywords.correct}&#39; si es correcta, o &#39;${currentKeywords.incorrect}&#39; si es incorrecta. Despu&eacute;s de esta palabra clave, a&ntilde;ade un punto y luego la explicaci&oacute;n detallada. Si la pregunta era de opci&oacute;n m&uacute;ltiple, indica cu&aacute;l era la opci&oacute;n correcta en tu explicaci&oacute;n si la respuesta del alumno fue incorrecta. Toda tu evaluaci&oacute;n y explicaci&oacute;n debe estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;generateReport&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Basado en el siguiente historial de preguntas y respuestas de un alumno, genera un informe conciso sobre sus puntos fuertes y d&eacute;biles. Incluye el n&uacute;mero total de respuestas correctas (${correctCount}) e incorrectas (${incorrectCount}).\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Historial de Sesi&oacute;n: ${JSON.stringify(sessionHistory, null, 2)}\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `El informe completo debe estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return { prompt, contextParts: [], generationConfig }; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;generateSuggestions&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Basado en el siguiente historial de preguntas y respuestas del alumno, y considerando que ha respondido ${correctCount} correctamente y ${incorrectCount} incorrectamente, sugiere &aacute;reas espec&iacute;ficas del documento (conceptos, secciones, temas) que el alumno deber&iacute;a repasar con m&aacute;s atenci&oacute;n.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `S&eacute; conciso y usa un formato de lista simple.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Historial: ${JSON.stringify(sessionHistory, null, 2)}\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Todas las sugerencias deben estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return { prompt, contextParts: [], generationConfig }; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;generateSummary&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Genera un resumen conciso y f&aacute;cil de entender del material de estudio proporcionado (texto y/o imagen).\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `El resumen debe capturar las ideas principales y los puntos clave. Todo el resumen debe estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;elaborateConcept&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Proporciona una explicaci&oacute;n m&aacute;s detallada y clara sobre el siguiente tema, pregunta o concepto: &quot;${data.concept}&quot;.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Utiliza el material de estudio proporcionado como base para tu explicaci&oacute;n.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Si el material no contiene informaci&oacute;n directa, intenta inferir o explicar bas&aacute;ndote en principios generales relacionados con el tema del material. La explicaci&oacute;n completa debe estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;generateFaq&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Genera una lista exhaustiva de preguntas frecuentes (FAQ) relevantes y sus respuestas concisas basadas en el material de estudio proporcionado (texto y/o imagen). Para documentos m&aacute;s largos, genera m&aacute;s preguntas.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Formatea CADA pregunta y respuesta de la siguiente manera, usando Markdown:\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `**Pregunta [N&uacute;mero]:** [Texto de la pregunta]\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `**Respuesta [N&uacute;mero]:** [Texto de la respuesta]\n\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Aseg&uacute;rate de que haya una l&iacute;nea en blanco entre cada par de pregunta/respuesta. Todas las preguntas y respuestas deben estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;generateAnalogies&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Genera 1 o 2 analog&iacute;as o met&aacute;foras creativas y claras para explicar el siguiente concepto o pregunta: &quot;${data.concept}&quot;.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Las analog&iacute;as deben ser f&aacute;ciles de entender y relevantes para el concepto, ayudando a simplificarlo.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Utiliza el material de estudio proporcionado como base para el contexto si es necesario. Todas las analog&iacute;as deben estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;generateFlashcards&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Genera un conjunto de flashcards basadas en el material de estudio proporcionado (texto y/o imagen). Cada flashcard debe tener un &quot;anverso&quot; (t&eacute;rmino, concepto clave o pregunta breve) y un &quot;reverso&quot; (definici&oacute;n, explicaci&oacute;n o respuesta).\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Genera entre 5 y 15 flashcards, dependiendo de la extensi&oacute;n y complejidad del material. Para material m&aacute;s extenso o complejo, genera m&aacute;s flashcards.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `El texto en AMBOS LADOS de CADA flashcard debe estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Devuelve las flashcards en formato JSON, siguiendo este esquema:\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; generationConfig = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseMimeType: &quot;application/json&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseSchema: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;OBJECT&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; properties: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;flashcards&quot;: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;ARRAY&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; description: &quot;Una lista de flashcards.&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; items: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;OBJECT&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; properties: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;front&quot;: { &quot;type&quot;: &quot;STRING&quot;, &quot;description&quot;: &quot;El contenido del anverso de la flashcard (t&eacute;rmino, concepto, pregunta).&quot; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;back&quot;: { &quot;type&quot;: &quot;STRING&quot;, &quot;description&quot;: &quot;El contenido del reverso de la flashcard (definici&oacute;n, explicaci&oacute;n, respuesta).&quot; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; required: [&quot;front&quot;, &quot;back&quot;]</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; required: [&quot;flashcards&quot;]</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Aseg&uacute;rate de que el JSON sea v&aacute;lido y siga el esquema proporcionado.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;describeImageForMap&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Describe la imagen proporcionada con el mayor detalle posible. Conc&eacute;ntrate en los objetos, sus relaciones, el contexto y cualquier texto visible. El objetivo es generar una descripci&oacute;n que pueda ser utilizada posteriormente para crear un mapa conceptual. La descripci&oacute;n debe estar en ${interactionLanguage}.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return { prompt, contextParts, generationConfig: null };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (type === &#39;generateSemanticMap&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Analiza el siguiente material de estudio (que puede ser texto, una descripci&oacute;n detallada de una imagen, o una combinaci&oacute;n de ambos) y extrae los conceptos clave y sus relaciones para construir un mapa conceptual.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `El objetivo es visualizar las ideas principales y c&oacute;mo se conectan entre s&iacute;.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Identifica entre 5 y 15 nodos principales, dependiendo de la complejidad del material. Para material muy corto, pueden ser menos.\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Las etiquetas de los nodos y las aristas deben estar en ${interactionLanguage}.\n\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `MATERIAL DE ESTUDIO PROPORCIONADO:\n---\n${data.studyMaterialText}\n---\n\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Devuelve los datos del mapa conceptual en formato JSON, siguiendo este esquema exacto:\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; generationConfig = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseMimeType: &quot;application/json&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseSchema: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;OBJECT&quot;, // Ensure the root is an OBJECT</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; properties: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;nodes&quot;: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;ARRAY&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; description: &quot;Una lista de nodos (conceptos). Cada nodo DEBE tener un &#39;id&#39; (string o n&uacute;mero &uacute;nico) y un &#39;label&#39; (string, nombre del concepto en el idioma de interacci&oacute;n). Opcionalmente puede tener un &#39;title&#39; (string, tooltip en el idioma de interacci&oacute;n).&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; items: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;OBJECT&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; properties: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;id&quot;: { type: [&quot;STRING&quot;, &quot;NUMBER&quot;], description: &quot;Identificador &uacute;nico para el nodo.&quot; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;label&quot;: { type: &quot;STRING&quot;, description: &quot;El texto que se mostrar&aacute; en el nodo.&quot; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;title&quot;: { type: &quot;STRING&quot;, description: &quot;Tooltip opcional para el nodo.&quot; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; required: [&quot;id&quot;, &quot;label&quot;]</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;edges&quot;: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;ARRAY&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; description: &quot;Una lista de aristas (relaciones). Cada arista DEBE tener &#39;from&#39; (id del nodo origen), &#39;to&#39; (id del nodo destino). Opcionalmente puede tener &#39;label&#39; (string, descripci&oacute;n de la relaci&oacute;n en el idioma de interacci&oacute;n) y &#39;arrows&#39; (string, ej: &#39;to&#39;).&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; items: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;OBJECT&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; properties: {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;from&quot;: { type: [&quot;STRING&quot;, &quot;NUMBER&quot;], description: &quot;ID del nodo origen.&quot; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;to&quot;: { type: [&quot;STRING&quot;, &quot;NUMBER&quot;], description: &quot;ID del nodo destino.&quot; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;label&quot;: { type: &quot;STRING&quot;, description: &quot;Etiqueta opcional para la arista.&quot; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;arrows&quot;: { type: &quot;STRING&quot;, description: &quot;Define la direcci&oacute;n de la flecha, ej: &#39;to&#39;, &#39;from&#39;, &#39;middle&#39;. Por defecto, &#39;to&#39;.&quot;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; required: [&quot;from&quot;, &quot;to&quot;]</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; required: [&quot;nodes&quot;, &quot;edges&quot;]</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt += `Aseg&uacute;rate de que el JSON sea v&aacute;lido y siga el esquema proporcionado. El JSON DEBE ser un OBJETO con dos claves principales: &quot;nodes&quot; (una lista de objetos nodo) y &quot;edges&quot; (una lista de objetos arista). Los &#39;id&#39; de los nodos deben ser &uacute;nicos y referenciados correctamente en las aristas (&#39;from&#39; y &#39;to&#39;).\n`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return { prompt, contextParts: [], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return { prompt, contextParts, generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Call Gemini API</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const callGeminiAPI = async (payload, currentIsLoadingSetter, isJsonExpected = false) =&gt; { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (currentIsLoadingSetter) currentIsLoadingSetter(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const apiKey = &quot;&quot;; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const response = await fetch(apiUrl, {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; method: &#39;POST&#39;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; headers: { &#39;Content-Type&#39;: &#39;application/json&#39; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; body: JSON.stringify(payload)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const result = await response.json();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (result.candidates &amp;&amp; result.candidates[0]?.content?.parts?.[0]?.text) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let textResponse = result.candidates[0].content.parts[0].text;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isJsonExpected) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (textResponse.startsWith(&quot;```json&quot;)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; textResponse = textResponse.substring(7);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (textResponse.endsWith(&quot;```&quot;)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;textResponse = textResponse.substring(0, textResponse.length - 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (textResponse.startsWith(&quot;```&quot;)) { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;textResponse = textResponse.substring(3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (textResponse.endsWith(&quot;```&quot;)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;textResponse = textResponse.substring(0, textResponse.length - 3);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; textResponse = textResponse.trim();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return textResponse;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&#39;Respuesta inesperada de la IA:&#39;, result);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (result.promptFeedback &amp;&amp; result.promptFeedback.blockReason) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;throw new Error(`Respuesta bloqueada por la IA: ${result.promptFeedback.blockReason}. Detalles: ${JSON.stringify(result.promptFeedback.safetyRatings)}`);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new Error(&#39;Respuesta inesperada o vac&iacute;a de la IA. Revisa la consola para m&aacute;s detalles.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } catch (error) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error al llamar a la API de Gemini:&quot;, error);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(`Error al comunicarse con la IA: ${error.message}.`, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } finally {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currentIsLoadingSetter) currentIsLoadingSetter(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Function to translate UI texts (both initial and manual)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const performUiTranslation = async (targetLang, isInitialSetup = false) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const normalizedTargetLang = targetLang.toLowerCase();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!targetLang || normalizedTargetLang === &#39;es&#39; || normalizedTargetLang === &#39;espa&ntilde;ol&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setUiTexts(baseUiTexts);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isInitialSetup) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setInteractionLanguage(&#39;espa&ntilde;ol&#39;); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setQuestionType(baseUiTexts.qTypeRandom);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyMode(baseUiTexts.studyModeRandom);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setInitialTranslationLanguage(&#39;espa&ntilde;ol&#39;); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setQuestionType(baseUiTexts.qTypeRandom);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyMode(baseUiTexts.studyModeRandom);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(baseUiTexts.interfaceTranslationSuccess.replace(&#39;{language}&#39;, &#39;Espa&ntilde;ol&#39;), &#39;info&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isInitialSetup) setIsInitialTranslating(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else setIsInterfaceTranslating(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (isInitialSetup) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsInitialTranslating(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setInitialTranslationLanguage(targetLang); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsInterfaceTranslating(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const prompt = `Traduce el siguiente objeto JSON de textos de interfaz de usuario al idioma &#39;${targetLang}&#39;.</span></p><p class="c1"><span class="c0">Mant&eacute;n la estructura JSON y las claves EXACTAMENTE IGUAL. Solo traduce los valores de las cadenas de texto.</span></p><p class="c1"><span class="c0">No traduzcas las palabras o frases que est&eacute;n entre llaves {} (por ejemplo, {fileName}, {current}, {total}, {type}, {item}, {language}), ni los emojis (ej: &#128218;, &#10024;, &#8505;&#65039;, &#9989;, &#128506;&#65039;, &#128269;, &#128172;, &#128202;, &#128736;&#65039;, &#128640;), ya que son placeholders para variables o iconos.</span></p><p class="c1"><span class="c0">Devuelve &Uacute;NICAMENTE el objeto JSON traducido, sin ning&uacute;n texto adicional, explicaciones o markdown.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">JSON original:</span></p><p class="c1"><span class="c0">${JSON.stringify(baseUiTexts, null, 2)}`;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }] }],</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; generationConfig: { responseMimeType: &quot;application/json&quot; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const translatedJson = await callGeminiAPI(payload, null, true);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (translatedJson) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const newUiTexts = JSON.parse(translatedJson);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let newQt = questionType;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const currentQtKey = Object.keys(baseUiTexts).find(k =&gt; baseUiTexts[k] === questionType);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currentQtKey &amp;&amp; newUiTexts[currentQtKey]) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newQt = newUiTexts[currentQtKey];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (isInitialSetup &amp;&amp; newUiTexts.qTypeRandom) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newQt = newUiTexts.qTypeRandom;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let newSm = studyMode;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const currentSmKey = Object.keys(baseUiTexts).find(k =&gt; baseUiTexts[k] === studyMode);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currentSmKey &amp;&amp; newUiTexts[currentSmKey]) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newSm = newUiTexts[currentSmKey];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (isInitialSetup &amp;&amp; newUiTexts.studyModeRandom) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newSm = newUiTexts.studyModeRandom;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setUiTexts(newUiTexts);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setQuestionType(newQt);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setStudyMode(newSm);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isInitialSetup) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setInteractionLanguage(targetLang); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isInitialSetup) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showToast(newUiTexts.interfaceTranslationSuccess?.replace(&#39;{language}&#39;, targetLang) || baseUiTexts.interfaceTranslationSuccess.replace(&#39;{language}&#39;, targetLang), &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (e) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error al parsear JSON de UI:&quot;, e, &quot;Respuesta AI:&quot;, translatedJson);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setUiTexts(baseUiTexts); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isInitialSetup) showToast(baseUiTexts.interfaceTranslationError, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setUiTexts(baseUiTexts); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isInitialSetup) showToast(baseUiTexts.interfaceTranslationError, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (isInitialSetup) setIsInitialTranslating(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; else setIsInterfaceTranslating(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Effect for initial language detection and translation</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; useEffect(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const lastLang = localStorage.getItem(&#39;lastSetLanguage&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const browserLang = navigator.language.split(&#39;-&#39;)[0]; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let targetInitialLang = &#39;espa&ntilde;ol&#39;; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (lastLang) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; targetInitialLang = lastLang;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else if (browserLang &amp;&amp; browserLang.toLowerCase() !== &#39;es&#39;) { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; targetInitialLang = browserLang;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; performUiTranslation(targetInitialLang, true); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setInteractionLanguage(targetInitialLang);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // eslint-disable-next-line react-hooks/exhaustive-deps</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }, []); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Effect to save interactionLanguage to localStorage</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; useEffect(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (interactionLanguage) { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; localStorage.setItem(&#39;lastSetLanguage&#39;, interactionLanguage);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }, [interactionLanguage]);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleTranslateInterfaceManually = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; performUiTranslation(interactionLanguage, false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Generate new question</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleGenerateQuestion = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!studyContentText &amp;&amp; !studyContentImage) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noContentToGenerateToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setFeedbackMessage(&#39;&#39;); setUserAnswer(&#39;&#39;); setConceptToElaborate(&#39;&#39;);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let effectiveTypeForGeneration = questionType; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let baseQuestionTypeKey = Object.keys(uiTexts).find(key =&gt; uiTexts[key] === questionType &amp;&amp; key.startsWith(&#39;qType&#39;));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!baseQuestionTypeKey) baseQuestionTypeKey = Object.keys(baseUiTexts).find(key =&gt; baseUiTexts[key] === questionType &amp;&amp; key.startsWith(&#39;qType&#39;));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let baseEffectiveType = baseQuestionTypeKey ? baseUiTexts[baseQuestionTypeKey] : questionType; </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (baseEffectiveType === baseUiTexts.qTypeRandom) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const actualBaseTypes = [baseUiTexts.qTypeGeneral, baseUiTexts.qTypeDefinition, baseUiTexts.qTypeRelationship, baseUiTexts.qTypeApplication, baseUiTexts.qTypeTrueFalse, baseUiTexts.qTypeMultipleChoice];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; baseEffectiveType = actualBaseTypes[Math.floor(Math.random() * actualBaseTypes.length)];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const translatedEffectiveTypeKey = Object.keys(baseUiTexts).find(k =&gt; baseUiTexts[k] === baseEffectiveType);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const translatedEffectiveTypeName = translatedEffectiveTypeKey ? uiTexts[translatedEffectiveTypeKey] : baseEffectiveType;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.questionTypeRandomToast.replace(&#39;{type}&#39;, translatedEffectiveTypeName), &#39;info&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt, contextParts, generationConfig } = constructPrompt(&#39;generateQuestion&#39;, { effectiveType: baseEffectiveType }); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = { contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }, ...contextParts] }], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiResponse = await callGeminiAPI(payload, setIsPracticeLoading);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiResponse) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let questionText = aiResponse; let concept = &#39;&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const baseStudyModeKey = Object.keys(uiTexts).find(k =&gt; uiTexts[k] === studyMode &amp;&amp; k.startsWith(&#39;studyMode&#39;)) || Object.keys(baseUiTexts).find(k =&gt; baseUiTexts[k] === studyMode &amp;&amp; k.startsWith(&#39;studyMode&#39;));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const currentBaseStudyMode = baseStudyModeKey ? baseUiTexts[baseStudyModeKey] : studyMode;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currentBaseStudyMode === baseUiTexts.studyModeGuided) { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const match = aiResponse.match(/\(Concepto:\s*(.*?)\)/i);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (match &amp;&amp; match[1]) { concept = match[1].trim(); questionText = aiResponse.replace(match[0], &#39;&#39;).trim(); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (concept) { setCoveredConcepts(prev =&gt; new Set(prev).add(concept)); setConceptToElaborate(concept); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setCurrentQuestion(questionText); setCurrentConcept(concept);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setAskedQuestions(prev =&gt; new Set(prev).add(questionText));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!concept) setConceptToElaborate(questionText);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else { setCurrentQuestion(&#39;No se pudo generar la pregunta. Int&eacute;ntalo de nuevo.&#39;); showToast(&#39;No se pudo generar la pregunta.&#39;, &#39;error&#39;);}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Evaluate user&#39;s answer</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleEvaluateAnswer = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!currentQuestion || !userAnswer) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noQuestionToEvaluateToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt, contextParts, generationConfig } = constructPrompt(&#39;evaluateAnswer&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = { contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }, ...contextParts] }], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiResponse = await callGeminiAPI(payload, setIsPracticeLoading);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiResponse) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const currentKeywords = languageKeywords[interactionLanguage.toLowerCase()] || languageKeywords[&#39;espa&ntilde;ol&#39;];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const isCorrect = aiResponse.startsWith(`${currentKeywords.correct}.`);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const feedback = aiResponse.substring(aiResponse.indexOf(&#39;.&#39;) + 1).trim();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setFeedbackMessage(feedback);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isCorrect) setCorrectCount(prev =&gt; prev + 1); else setIncorrectCount(prev =&gt; prev + 1);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setSessionHistory(prev =&gt; [...prev, { question: currentQuestion, userAnswer, feedback, isCorrect, concept: currentConcept }]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setConceptToElaborate(currentConcept || currentQuestion);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else { setFeedbackMessage(&#39;No se pudo evaluar la respuesta. Int&eacute;ntalo de nuevo.&#39;); showToast(&#39;No se pudo evaluar la respuesta.&#39;, &#39;error&#39;);}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Generate report</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleGenerateReport = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (sessionHistory.length === 0) { showToast(uiTexts.noHistoryForReportToast, &#39;info&#39;); return; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt: reportPrompt } = constructPrompt(&#39;generateReport&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const reportResponse = await callGeminiAPI({ contents: [{ role: &quot;user&quot;, parts: [{ text: reportPrompt }] }] }, setIsPracticeLoading); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setReportContent(reportResponse || &#39;No se pudo generar el informe.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!reportResponse) showToast(&#39;No se pudo generar el informe.&#39;, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt: suggestionsPrompt } = constructPrompt(&#39;generateSuggestions&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const suggestionsResponse = await callGeminiAPI({ contents: [{ role: &quot;user&quot;, parts: [{ text: suggestionsPrompt }] }] }, setIsPracticeLoading);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setSuggestionsContent(suggestionsResponse || &#39;No se pudieron generar sugerencias.&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!suggestionsResponse) showToast(&#39;No se pudieron generar sugerencias.&#39;, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Smart Summary Generation</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleGenerateSummary = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!studyContentText &amp;&amp; !studyContentImage) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noContentForActionToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setSmartSummary(&#39;&#39;); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt, contextParts, generationConfig } = constructPrompt(&#39;generateSummary&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = { contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }, ...contextParts] }], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiResponse = await callGeminiAPI(payload, setIsSummaryLoading);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiResponse) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setSmartSummary(aiResponse);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setShowSummaryModal(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else { showToast(&#39;No se pudo generar el resumen. Int&eacute;ntalo de nuevo.&#39;, &#39;error&#39;); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle FAQ Generation</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleGenerateFaq = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!studyContentText &amp;&amp; !studyContentImage) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noContentForActionToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setFaqContent(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt, contextParts, generationConfig } = constructPrompt(&#39;generateFaq&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = { contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }, ...contextParts] }], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiResponse = await callGeminiAPI(payload, setIsFaqLoading);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiResponse) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setFaqContent(aiResponse);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setShowFaqModal(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;No se pudieron generar las FAQs. Int&eacute;ntalo de nuevo.&#39;, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Elaborate Concept</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleElaborateConcept = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!conceptToElaborate) { showToast(uiTexts.noConceptToElaborateToast, &#39;info&#39;); return; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!studyContentText &amp;&amp; !studyContentImage) { showToast(uiTexts.noContentForElaborationToast, &#39;warning&#39;); return; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt, contextParts, generationConfig } = constructPrompt(&#39;elaborateConcept&#39;, { concept: conceptToElaborate });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = { contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }, ...contextParts] }], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiResponse = await callGeminiAPI(payload, setIsElaborationLoading);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiResponse) { setElaboratedExplanation(aiResponse); setShowElaborationModal(true); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; else { showToast(&#39;No se pudo generar la explicaci&oacute;n. Int&eacute;ntalo de nuevo.&#39;, &#39;error&#39;); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Generate Analogies</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleGenerateAnalogies = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!conceptToElaborate) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noConceptForAnalogiesToast, &#39;info&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!studyContentText &amp;&amp; !studyContentImage) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noContentForAnalogiesToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setAnalogiesContent(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt, contextParts, generationConfig } = constructPrompt(&#39;generateAnalogies&#39;, { concept: conceptToElaborate });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = { contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }, ...contextParts] }], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiResponse = await callGeminiAPI(payload, setIsAnalogyLoading);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiResponse) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setAnalogiesContent(aiResponse);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setShowAnalogyModal(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;No se pudieron generar las analog&iacute;as. Int&eacute;ntalo de nuevo.&#39;, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Generate Flashcards</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleGenerateFlashcards = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!studyContentText &amp;&amp; !studyContentImage) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noContentForActionToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setFlashcardsData([]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setCurrentFlashcardIndex(0);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setIsFlashcardFlipped(false);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { prompt, contextParts, generationConfig } = constructPrompt(&#39;generateFlashcards&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const payload = { contents: [{ role: &quot;user&quot;, parts: [{ text: prompt }, ...contextParts] }], generationConfig };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiResponse = await callGeminiAPI(payload, setIsFlashcardsLoading, true); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiResponse) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const parsedData = JSON.parse(aiResponse);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (parsedData.flashcards &amp;&amp; Array.isArray(parsedData.flashcards) &amp;&amp; parsedData.flashcards.length &gt; 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setFlashcardsData(parsedData.flashcards);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setShowFlashcardModal(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.invalidFlashcardsToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (e) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error al parsear JSON de flashcards:&quot;, e, &quot;Respuesta AI:&quot;, aiResponse);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.errorProcessingFlashcardsToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;No se pudieron generar las flashcards.&#39;, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Generate Semantic Map</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleGenerateSemanticMap = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!studyContentText &amp;&amp; !studyContentImage) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noContentForActionToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!isVisNetworkLoaded) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.visNotLoadedToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setIsSemanticMapLoading(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setSemanticMapData(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let effectiveStudyText = studyContentText;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (studyContentImage) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.describingImageForMapToast, &#39;info&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt: imageDescPromptText, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; contextParts: imageDescContextParts, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; generationConfig: imageDescGenConfig </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } = constructPrompt(&#39;describeImageForMap&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const imageDescPayload = { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; contents: [{ role: &quot;user&quot;, parts: [{ text: imageDescPromptText }, ...imageDescContextParts] }], </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; generationConfig: imageDescGenConfig </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const imageDescription = await callGeminiAPI(imageDescPayload, null); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (imageDescription) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; effectiveStudyText = imageDescription + (studyContentText ? `\n\n${studyContentText}` : &#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.imageDescriptionSuccessToast, &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.imageDescriptionErrorToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsSemanticMapLoading(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!effectiveStudyText) { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noContentForActionToast, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsSemanticMapLoading(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prompt: mapPromptText, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; generationConfig: mapGenConfig </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } = constructPrompt(&#39;generateSemanticMap&#39;, { studyMaterialText: effectiveStudyText });</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const finalMapPayload = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; contents: [{ role: &quot;user&quot;, parts: [{ text: mapPromptText }] }], </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; generationConfig: mapGenConfig</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const aiMapResponse = await callGeminiAPI(finalMapPayload, setIsSemanticMapLoading, true);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (aiMapResponse) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const parsedData = JSON.parse(aiMapResponse);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (parsedData.nodes &amp;&amp; parsedData.edges &amp;&amp; Array.isArray(parsedData.nodes) &amp;&amp; Array.isArray(parsedData.edges)) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setSemanticMapData(parsedData);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setShowSemanticMapModal(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Respuesta JSON del mapa sem&aacute;ntico inv&aacute;lida:&quot;, parsedData);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.noSemanticMapDataToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (e) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error al parsear JSON del mapa sem&aacute;ntico:&quot;, e, &quot;Respuesta AI:&quot;, aiMapResponse);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.errorProcessingSemanticMapToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;No se pudo generar el mapa conceptual.&#39;, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const fallbackCopyTextToClipboard = (text, itemTypeKey) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const itemLabel = uiTexts[itemTypeKey] || itemTypeKey; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const textArea = document.createElement(&quot;textarea&quot;); textArea.value = text;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Object.assign(textArea.style, { position: &quot;fixed&quot;, top: &quot;0&quot;, left: &quot;0&quot;, width: &quot;2em&quot;, height: &quot;2em&quot;, padding: &quot;0&quot;, border: &quot;none&quot;, outline: &quot;none&quot;, boxShadow: &quot;none&quot;, background: &quot;transparent&quot; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(textArea); textArea.focus(); textArea.select();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (document.execCommand(&#39;copy&#39;)) showToast(uiTexts.copiedToClipboardFallback.replace(&#39;{item}&#39;, itemLabel), &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else showToast(uiTexts.copiedToClipboardError.replace(&#39;{item}&#39;, itemLabel), &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } catch (err) { showToast(uiTexts.copiedToClipboardErrorFallback.replace(&#39;{item}&#39;, itemLabel), &#39;error&#39;); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(textArea);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleCopyToClipboard = (text, itemTypeKey) =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const itemLabel = uiTexts[itemTypeKey] || itemTypeKey; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!text) { showToast(uiTexts.noItemToCopy.replace(&#39;{item}&#39;, itemLabel), &#39;info&#39;); return; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (navigator.clipboard &amp;&amp; navigator.clipboard.writeText) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; navigator.clipboard.writeText(text)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .then(() =&gt; showToast(uiTexts.copiedToClipboardSuccess.replace(&#39;{item}&#39;, itemLabel), &#39;success&#39;))</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .catch(err =&gt; { console.error(`Error al copiar ${itemLabel}:`, err); fallbackCopyTextToClipboard(text, itemTypeKey); });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else { fallbackCopyTextToClipboard(text, itemTypeKey); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Copy Summary</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleCopySummary = () =&gt; handleCopyToClipboard(smartSummary, &#39;summaryModalTitle&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Copy FAQ</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleCopyFaq = () =&gt; handleCopyToClipboard(faqContent, &#39;faqModalTitle&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Copy Elaboration</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleCopyElaboration = () =&gt; handleCopyToClipboard(elaboratedExplanation, &#39;elaborationModalTitle&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Handle Copy Analogies</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleCopyAnalogies = () =&gt; handleCopyToClipboard(analogiesContent, &#39;analogyModalTitle&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Flashcard navigation</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleNextFlashcard = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setIsFlashcardFlipped(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setCurrentFlashcardIndex(prev =&gt; (prev + 1) % flashcardsData.length);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handlePrevFlashcard = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setIsFlashcardFlipped(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setCurrentFlashcardIndex(prev =&gt; (prev - 1 + flashcardsData.length) % flashcardsData.length);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleShuffleFlashcards = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setIsFlashcardFlipped(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setFlashcardsData(prev =&gt; [...prev].sort(() =&gt; Math.random() - 0.5));</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setCurrentFlashcardIndex(0);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Restart session</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleRestartSession = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setStudyContentText(&#39;&#39;); setStudyContentImage(null);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setCurrentQuestion(&#39;&#39;); setCurrentConcept(&#39;&#39;); setUserAnswer(&#39;&#39;); setFeedbackMessage(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setCorrectCount(0); setIncorrectCount(0); setSessionHistory([]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setAskedQuestions(new Set()); setCoveredConcepts(new Set());</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setReportContent(&#39;&#39;); setSuggestionsContent(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setSmartSummary(&#39;&#39;); setShowSummaryModal(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setFaqContent(&#39;&#39;); setShowFaqModal(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setElaboratedExplanation(&#39;&#39;); setShowElaborationModal(false); setConceptToElaborate(&#39;&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setAnalogiesContent(&#39;&#39;); setShowAnalogyModal(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setFlashcardsData([]); setShowFlashcardModal(false); setCurrentFlashcardIndex(0); setIsFlashcardFlipped(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setSemanticMapData(null); setShowSemanticMapModal(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (networkInstanceRef.current) { networkInstanceRef.current.destroy(); networkInstanceRef.current = null; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setShowModal(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setShowDescriptionModal(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setActiveTab(&#39;contenido&#39;); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setQuestionType(uiTexts.qTypeRandom); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setStudyMode(uiTexts.studyModeRandom);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // Ensure to exit fullscreen if active and reset focus mode state</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (document.exitFullscreen) document.exitFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (document.mozCancelFullScreen) document.mozCancelFullScreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (document.webkitExitFullscreen) document.webkitExitFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (document.msExitFullscreen) document.msExitFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; setIsFocusMode(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.sessionRestartedToast, &#39;info&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Tab Button Component</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const TabButton = ({ tabId, label }) =&gt; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;button</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={() =&gt; setActiveTab(tabId)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className={`py-2 sm:py-3 px-3 sm:px-5 text-sm sm:text-base font-medium rounded-t-lg transition-colors duration-200 ease-in-out focus:outline-none whitespace-nowrap</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${activeTab === tabId </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? &#39;bg-blue-600 text-white shadow-md&#39; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : &#39;bg-gray-200 text-blue-700 hover:bg-gray-300&#39;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }`}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {label}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; );</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Download Semantic Map as HTML</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleDownloadMapHTML = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!semanticMapData) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;No hay datos del mapa para generar el HTML.&#39;, &#39;warning&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const htmlContent = `</span></p><p class="c1"><span class="c0">&lt;!DOCTYPE html&gt;</span></p><p class="c1"><span class="c0">&lt;html lang=&quot;es&quot;&gt;</span></p><p class="c1"><span class="c0">&lt;head&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;meta charset=&quot;UTF-8&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;title&gt;Mapa Conceptual Interactivo&lt;/title&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;script type=&quot;text/javascript&quot; src=&quot;https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.9/standalone/umd/vis-network.min.js&quot;&gt;&lt;/script&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.9/dist/vis-network.min.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;style&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; font-family: Arial, sans-serif; background-color: #f0f2f5; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; #mynetwork { width: calc(100% - 20px); height: calc(100% - 20px); border: 1px solid #ccc; box-sizing: border-box; margin: 10px; background-color: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 8px;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; .controls { position: absolute; top: 20px; left: 20px; z-index: 10; background: rgba(255,255,255,0.9); padding: 10px; border-radius: 5px; box-shadow: 0 0 10px rgba(0,0,0,0.2); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; .controls button { margin: 5px; padding: 8px 12px; border-radius: 4px; border: 1px solid #ccc; background-color: #f0f0f0; cursor: pointer; font-size: 14px; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; .controls button:hover { background-color: #e0e0e0; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; .vis-tooltip { background-color: #fff !important; border: 1px solid #ccc !important; box-shadow: 0 2px 5px rgba(0,0,0,0.15) !important; padding: 8px !important; border-radius: 4px !important; font-family: Arial, sans-serif !important; color: #333 !important; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;/style&gt;</span></p><p class="c1"><span class="c0">&lt;/head&gt;</span></p><p class="c1"><span class="c0">&lt;body&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;div class=&quot;controls&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick=&quot;if(network) network.fit()&quot;&gt;Ajustar Zoom&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick=&quot;togglePhysics()&quot;&gt;F&iacute;sicas On/Off&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;p style=&quot;font-size:0.8em; margin-top:5px; color: #555;&quot;&gt;Rueda para zoom, arrastra para mover.&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;div id=&quot;mynetwork&quot;&gt;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;script type=&quot;text/javascript&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const nodes = new vis.DataSet(${JSON.stringify(semanticMapData.nodes || [])});</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const edges = new vis.DataSet(${JSON.stringify(semanticMapData.edges || [])});</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const container = document.getElementById(&#39;mynetwork&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const data = { nodes: nodes, edges: edges };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const options = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout: { hierarchical: false, improvedLayout: true },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; interaction: { dragNodes: true, dragView: true, hover: true, zoomView: true, navigationButtons: false, keyboard: true, tooltipDelay: 200 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; physics: { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; enabled: true, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; solver: &#39;barnesHut&#39;, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; barnesHut: { gravitationalConstant: -2500, centralGravity: 0.1, springLength: 120, springConstant: 0.03, damping: 0.09, avoidOverlap: 0.15 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stabilization: { iterations: 1500, fit: true }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes: { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shape: &#39;box&#39;, size: 18, borderWidth: 1, shadow: {enabled: true, size:5, x:2, y:2},</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font: { size: 14, color: &#39;#343434&#39;, strokeWidth: 0, face: &#39;Arial&#39; }, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: { border: &#39;#4A90E2&#39;, background: &#39;#E9F2FC&#39;, highlight: { border: &#39;#357ABD&#39;, background: &#39;#D4E8FA&#39; }, hover: { border: &#39;#357ABD&#39;, background: &#39;#D4E8FA&#39; } }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; edges: { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width: 1.5, smooth: { type: &#39;dynamic&#39;, roundness: 0.2 }, arrows: { to: { enabled: true, scaleFactor: 0.8, type: &#39;arrow&#39; } },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: { color:&#39;#888&#39;, highlight:&#39;#555&#39;, hover: &#39;#555&#39;, opacity:0.8 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font: { align: &#39;middle&#39;, size: 11, color: &#39;#666&#39;, strokeWidth: 0, background: &#39;rgba(255,255,255,0.7)&#39;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let network = new vis.Network(container, data, options);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; network.on(&quot;stabilizationIterationsDone&quot;, function () { network.setOptions( { physics: false } ); });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; function togglePhysics() { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!network) return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const currentPhysicsState = network.physics.options.enabled;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; network.setOptions({ physics: !currentPhysicsState });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!currentPhysicsState) network.stabilize(); // Re-stabilize if turning physics on</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; window.onload = () =&gt; { if(network) network.fit(); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &lt;/script&gt;</span></p><p class="c1"><span class="c0">&lt;/body&gt;</span></p><p class="c1"><span class="c0">&lt;/html&gt;`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const blob = new Blob([htmlContent], { type: &#39;text/html&#39; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const url = URL.createObjectURL(blob);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const a = document.createElement(&#39;a&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; a.href = url;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; a.download = &#39;mapa_conceptual_interactivo.html&#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(a);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; a.click();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(a);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; URL.revokeObjectURL(url);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; showToast(&#39;Mapa conceptual descargado como HTML.&#39;, &#39;success&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Effect for initializing and updating vis-network</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; useEffect(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; let timerId = null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (showSemanticMapModal &amp;&amp; semanticMapData &amp;&amp; networkRef.current &amp;&amp; isVisNetworkLoaded &amp;&amp; window.vis) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (networkInstanceRef.current) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current.destroy();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current = null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; timerId = setTimeout(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!networkRef.current) { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.warn(&quot;Network container ref disappeared before network initialization.&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const nodes = new window.vis.DataSet(semanticMapData.nodes);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const edges = new window.vis.DataSet(semanticMapData.edges);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const data = { nodes, edges };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const options = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; layout: { hierarchical: false, improvedLayout: true, randomSeed: 2 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; interaction: { dragNodes: true, dragView: true, hover: true, zoomView: true, navigationButtons: true, keyboard: true, tooltipDelay: 200 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; physics: { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; enabled: true, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; solver: &#39;barnesHut&#39;, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; barnesHut: { gravitationalConstant: -3000, centralGravity: 0.15, springLength: 150, springConstant: 0.02, damping: 0.09, avoidOverlap: 0.2 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stabilization: { iterations: 1000, fit: true, updateInterval: 25 }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodes: { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shape: &#39;box&#39;, size: 20, borderWidth: 1.5, shadow: {enabled: true, size:6, x:3, y:3},</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font: { size: 14, color: &#39;#333&#39;, face: &#39;Inter, Arial, sans-serif&#39; }, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: { border: &#39;#3b82f6&#39;, background: &#39;#dbeafe&#39;, highlight: { border: &#39;#2563eb&#39;, background: &#39;#bfdbfe&#39; }, hover: { border: &#39;#2563eb&#39;, background: &#39;#bfdbfe&#39; } },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; margin: { top: 5, right: 10, bottom: 5, left: 10 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; widthConstraint: { maximum: 150 }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; edges: { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width: 2, smooth: { type: &#39;cubicBezier&#39;, forceDirection: &#39;horizontal&#39;, roundness: 0.4 }, </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arrows: { to: { enabled: true, scaleFactor: 0.7, type: &#39;arrow&#39; } },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: { color:&#39;#9ca3af&#39;, highlight:&#39;#4b5563&#39;, hover: &#39;#6b7280&#39;, opacity: 1.0 },</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font: { align: &#39;middle&#39;, size: 11, color: &#39;#4b5563&#39;, strokeWidth: 0, background: &#39;rgba(255,255,255,0.6)&#39;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const network = new window.vis.Network(networkRef.current, data, options);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current = network;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; network.on(&quot;stabilizationIterationsDone&quot;, () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (networkInstanceRef.current) { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current.setOptions({ physics: false });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current.fit();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; network.on(&quot;doubleClick&quot;, params =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (networkInstanceRef.current) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (params.nodes.length &gt; 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current.focus(params.nodes[0], { scale: 1.5, animation: true });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current.fit({animation: true});</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, 0); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (networkInstanceRef.current) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current.destroy();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current = null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return () =&gt; { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (timerId) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clearTimeout(timerId); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (networkInstanceRef.current) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current.destroy();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networkInstanceRef.current = null;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }, [showSemanticMapModal, semanticMapData, isVisNetworkLoaded]); </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // Toggle Fullscreen Mode</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; const handleToggleFocusMode = async () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!appRef.current) return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const isCurrentlyFullscreen = !!(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if (!isCurrentlyFullscreen) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (appRef.current.requestFullscreen) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await appRef.current.requestFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (appRef.current.mozRequestFullScreen) { // Firefox</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await appRef.current.mozRequestFullScreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (appRef.current.webkitRequestFullscreen) { // Chrome, Safari, Opera</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await appRef.current.webkitRequestFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (appRef.current.msRequestFullscreen) { // IE/Edge</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await appRef.current.msRequestFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // State update and toast will be handled by the event listener for fullscreenchange</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (err) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error al solicitar pantalla completa:&quot;, err);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.focusModeRequestErrorToast || baseUiTexts.focusModeRequestErrorToast, &#39;error&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsFocusMode(false); </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (document.exitFullscreen) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await document.exitFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (document.mozCancelFullScreen) { // Firefox</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await document.mozCancelFullScreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (document.webkitExitFullscreen) { // Chrome, Safari, Opera</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await document.webkitExitFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (document.msExitFullscreen) { // IE/Edge</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await document.msExitFullscreen();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// State update and toast will be handled by the event listener for fullscreenchange</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (err) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error(&quot;Error al salir de pantalla completa:&quot;, err);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If exiting fails, the state might become out of sync. The event listener should ideally catch this.</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; useEffect(() =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const handleFullscreenChange = () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const isCurrentlyFullscreen = !!(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isFocusMode &amp;&amp; !isCurrentlyFullscreen) { // Exited fullscreen (e.g. ESC)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsFocusMode(false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.focusModeInactiveToast || baseUiTexts.focusModeInactiveToast, &#39;info&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (!isFocusMode &amp;&amp; isCurrentlyFullscreen) { // Entered fullscreen successfully</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setIsFocusMode(true);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; showToast(uiTexts.focusModeActiveToast || baseUiTexts.focusModeActiveToast, &#39;info&#39;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (isFocusMode &amp;&amp; isCurrentlyFullscreen) { // Explicitly entered, already in focus mode state</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// This case might occur if the state was already set by the click handler</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// before the event fires. Ensuring the toast is shown.</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// No state change needed if already correct.</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// showToast(uiTexts.focusModeActiveToast || baseUiTexts.focusModeActiveToast, &#39;info&#39;); // Can be redundant if already shown</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.addEventListener(&#39;fullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.addEventListener(&#39;mozfullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.addEventListener(&#39;webkitfullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; document.addEventListener(&#39;msfullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return () =&gt; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.removeEventListener(&#39;fullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.removeEventListener(&#39;mozfullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.removeEventListener(&#39;webkitfullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.removeEventListener(&#39;msfullscreenchange&#39;, handleFullscreenChange);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }, [isFocusMode, uiTexts]);</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (isInitialTranslating) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const langForMessage = initialTranslationLanguage || &quot;your target language&quot;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const mainMessage = `Translating interface to ${langForMessage}...`;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; const subMessages = {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; en: &quot;Please wait a moment...&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zh: &quot;</span><span class="c3">&#35831;&#31245;&#20505;...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hi: &quot;&#2325;&#2371;&#2346;&#2351;&#2366; &#2341;&#2379;&#2337;&#2364;&#2368; &#2342;&#2375;&#2352; &#2346;&#2381;&#2352;&#2340;&#2368;&#2325;&#2381;&#2359;&#2366; &#2325;&#2352;&#2375;&#2306;...&quot;,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; es: &quot;Por favor, espera un momento...&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-100 bg-opacity-95 flex flex-col justify-center items-center z-[200] p-4 text-center&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-2xl font-semibold text-blue-700 animate-pulse&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {mainMessage}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;mt-3 space-y-1&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-xs text-gray-500&quot;&gt;{subMessages.en}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-xs text-gray-500&quot;&gt;{subMessages.zh}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-xs text-gray-500&quot;&gt;{subMessages.hi}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-xs text-gray-500&quot;&gt;{subMessages.es}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div ref={appRef} className={`min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 font-inter text-gray-800 flex flex-col items-center ${isFocusMode ? &#39;p-0 sm:p-1&#39; : &#39;p-2 sm:p-4&#39;} transition-all duration-300 ease-in-out`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {toast.show &amp;&amp; &lt;Toast message={toast.message} type={toast.type} onDismiss={dismissToast} /&gt;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {!isFocusMode &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h1 className=&quot;text-3xl sm:text-4xl font-extrabold text-blue-700 mb-4 sm:mb-6 text-center drop-shadow-md&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span className=&quot;text-green-500&quot;&gt;{uiTexts.appTitle.charAt(0)}&lt;/span&gt;{uiTexts.appTitle.substring(1)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/h1&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Fullscreen Toggle Button */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`w-full max-w-3xl flex ${isFocusMode ? &#39;justify-end mb-0.5 mt-1 sm:mt-2&#39; : &#39;justify-end mb-2&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={handleToggleFocusMode}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; title={isFocusMode ? (uiTexts.exitFocusModeButtonLabel || baseUiTexts.exitFocusModeButtonLabel) : (uiTexts.focusModeButtonLabel || baseUiTexts.focusModeButtonLabel)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;p-1.5 sm:p-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg shadow-sm hover:shadow-md transition-all transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; aria-label={isFocusMode ? (uiTexts.exitFocusModeButtonLabel || baseUiTexts.exitFocusModeButtonLabel) : (uiTexts.focusModeButtonLabel || baseUiTexts.focusModeButtonLabel)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isFocusMode ? (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; fill=&quot;none&quot; viewBox=&quot;0 0 24 24&quot; strokeWidth={1.8} stroke=&quot;currentColor&quot; className=&quot;w-4 h-4 sm:w-5 sm:h-5&quot;&gt;&lt;path strokeLinecap=&quot;round&quot; strokeLinejoin=&quot;round&quot; d=&quot;M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5M15 15l5.25 5.25&quot; /&gt;&lt;/svg&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) : (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; fill=&quot;none&quot; viewBox=&quot;0 0 24 24&quot; strokeWidth={1.8} stroke=&quot;currentColor&quot; className=&quot;w-4 h-4 sm:w-5 sm:h-5&quot;&gt;&lt;path strokeLinecap=&quot;round&quot; strokeLinejoin=&quot;round&quot; d=&quot;M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9M20.25 20.25h-4.5m4.5 0v-4.5m0-4.5L15 15&quot; /&gt;&lt;/svg&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`w-full max-w-3xl flex flex-col ${isFocusMode ? &#39;flex-grow&#39; : &#39;&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Tab Navigation */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex flex-wrap gap-1 border-b-2 border-blue-500 pb-1 mb-0&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;TabButton tabId=&quot;contenido&quot; label={uiTexts.tabContentTools} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;TabButton tabId=&quot;practica&quot; label={uiTexts.tabPractice} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;TabButton tabId=&quot;reporte&quot; label={uiTexts.tabReport} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Tab Content */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`bg-white p-4 sm:p-6 rounded-b-xl shadow-lg border border-t-0 border-blue-200 ${isFocusMode ? &#39;flex-grow overflow-y-auto&#39; : &#39;&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {activeTab === &#39;contenido&#39; &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2 className=&quot;text-xl sm:text-2xl font-semibold text-blue-600 mb-4 sm:mb-5&quot;&gt;{uiTexts.contentToolsTitle}&lt;/h2&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{/* Configuration Section */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-slate-50 p-4 rounded-lg shadow-sm mb-6 border border-slate-200&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;grid grid-cols-1 md:grid-cols-12 gap-x-4 gap-y-3 items-end&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;md:col-span-3&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;userAge&quot; className=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;{uiTexts.userAgeLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;number&quot; id=&quot;userAge&quot; className=&quot;w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm&quot; value={userAge} onChange={(e) =&gt; setUserAge(e.target.value)} placeholder={uiTexts.userAgePlaceholder} min=&quot;5&quot; max=&quot;99&quot;/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;md:col-span-5&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;language&quot; className=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;{uiTexts.interactionLanguageLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;text&quot; id=&quot;language&quot; className=&quot;w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm&quot; value={interactionLanguage} onChange={(e) =&gt; setInteractionLanguage(e.target.value)} placeholder={uiTexts.interactionLanguagePlaceholder}/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;md:col-span-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={handleTranslateInterfaceManually}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; disabled={isInterfaceTranslating}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;w-full bg-green-500 text-white py-2 px-3 rounded-lg shadow-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition transform hover:scale-105 text-xs font-medium disabled:opacity-60 h-[2.375rem] sm:h-[2.625rem] flex items-center justify-center&quot; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isInterfaceTranslating ? uiTexts.translatingInterfaceButton : uiTexts.translateInterfaceButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={() =&gt; setShowDescriptionModal(true)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;w-full bg-sky-500 text-white py-2.5 px-4 rounded-lg shadow-md hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 transition transform hover:scale-105 mb-6 text-sm font-medium&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {uiTexts.howToUseButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Input Method Sections */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;space-y-6&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Option 1: Load Document */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-blue-50 p-4 rounded-lg shadow-sm border border-blue-200&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-lg font-semibold text-blue-700 mb-2&quot;&gt;{uiTexts.inputMethodDocTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;documentUpload&quot; className=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;{uiTexts.loadDocumentLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id=&quot;documentUpload&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-400 bg-white&quot; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={() =&gt; documentInputRef.current.click()} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onDragOver={handleDragOver} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onDrop={handleDocumentDrop}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;file&quot; accept=&quot;.pdf,.txt,.md,.docx&quot; ref={documentInputRef} onChange={handleDocumentUpload} className=&quot;hidden&quot;/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-gray-500 text-sm&quot;&gt;{uiTexts.dropDocumentPlaceholder}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Option 2: Paste Text */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-green-50 p-4 rounded-lg shadow-sm border border-green-200&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-lg font-semibold text-green-700 mb-2&quot;&gt;{uiTexts.inputMethodTextTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;studyText&quot; className=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;{uiTexts.pasteTextLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;textarea </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id=&quot;studyText&quot; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 resize-y min-h-[120px] text-sm bg-white&quot; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; placeholder={uiTexts.pasteTextPlaceholder} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value={studyContentText} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onChange={(e) =&gt; setStudyContentText(e.target.value)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;&lt;/textarea&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Option 3: Load Image */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-purple-50 p-4 rounded-lg shadow-sm border border-purple-200&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-lg font-semibold text-purple-700 mb-2&quot;&gt;{uiTexts.inputMethodImageTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;imageUpload&quot; className=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;{uiTexts.loadImageLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id=&quot;imageUpload&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-purple-400 bg-white&quot; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={() =&gt; imageInputRef.current.click()} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onDragOver={handleDragOver} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onDrop={handleImageDrop}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;file&quot; accept=&quot;image/*&quot; ref={imageInputRef} onChange={handleImageUpload} className=&quot;hidden&quot;/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {studyContentImage ? (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;img src={`data:image/png;base64,${studyContentImage}`} alt=&quot;Contenido de estudio cargado&quot; className=&quot;max-h-40 mx-auto rounded-md mb-2&quot; onError={(e) =&gt; { e.target.onerror = null; e.target.src=`https://placehold.co/200x100/CCCCCC/333333?text=${uiTexts.imageErrorPlaceholder}`; }}/&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) : (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-gray-500 text-sm&quot;&gt;{uiTexts.dropImagePlaceholder}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-xs text-gray-500 mt-4 mb-6 text-center&quot;&gt;{uiTexts.canLoadTextAndImage}&lt;/p&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;h3 className=&quot;text-lg sm:text-xl font-semibold text-gray-700 mb-3 mt-8 pt-4 border-t border-gray-300&quot;&gt;{uiTexts.contentToolsHeadline}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;grid grid-cols-2 sm:grid-cols-2 gap-2 sm:gap-4&quot;&gt; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleGenerateSummary} disabled={isSummaryLoading || (!studyContentText &amp;&amp; !studyContentImage)} className=&quot;bg-teal-500 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg shadow-md hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 text-sm sm:text-base&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isSummaryLoading ? uiTexts.summarizingButton : uiTexts.summarizeButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleGenerateFaq} disabled={isFaqLoading || (!studyContentText &amp;&amp; !studyContentImage)} className=&quot;bg-cyan-500 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg shadow-md hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 text-sm sm:text-base&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isFaqLoading ? uiTexts.generatingFaqButton : uiTexts.faqButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleGenerateFlashcards} disabled={isFlashcardsLoading || (!studyContentText &amp;&amp; !studyContentImage)} className=&quot;bg-amber-500 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg shadow-md hover:bg-amber-600 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 text-sm sm:text-base&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isFlashcardsLoading ? uiTexts.creatingFlashcardsButton : uiTexts.flashcardsButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleGenerateSemanticMap} disabled={isSemanticMapLoading || (!studyContentText &amp;&amp; !studyContentImage) || !isVisNetworkLoaded} className=&quot;bg-purple-500 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg shadow-md hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 text-sm sm:text-base&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isSemanticMapLoading ? uiTexts.generatingMapButton : uiTexts.conceptMapButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {activeTab === &#39;practica&#39; &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2 className=&quot;text-xl sm:text-2xl font-semibold text-blue-600 mb-4 sm:mb-5&quot;&gt;{uiTexts.guidedPracticeTitle}&lt;/h2&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;questionType&quot; className=&quot;block text-base font-medium text-gray-700 mb-1&quot;&gt;{uiTexts.questionTypeLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;select id=&quot;questionType&quot; className=&quot;w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500&quot; value={questionType} onChange={(e) =&gt; setQuestionType(e.target.value)}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.qTypeRandom}&gt;{uiTexts.qTypeRandom}&lt;/option&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.qTypeGeneral}&gt;{uiTexts.qTypeGeneral}&lt;/option&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.qTypeDefinition}&gt;{uiTexts.qTypeDefinition}&lt;/option&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.qTypeRelationship}&gt;{uiTexts.qTypeRelationship}&lt;/option&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.qTypeApplication}&gt;{uiTexts.qTypeApplication}&lt;/option&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.qTypeTrueFalse}&gt;{uiTexts.qTypeTrueFalse}&lt;/option&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.qTypeMultipleChoice}&gt;{uiTexts.qTypeMultipleChoice}&lt;/option&gt; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/select&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;studyMode&quot; className=&quot;block text-base font-medium text-gray-700 mb-1&quot;&gt;{uiTexts.studyModeLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;select id=&quot;studyMode&quot; className=&quot;w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500&quot; value={studyMode} onChange={(e) =&gt; setStudyMode(e.target.value)}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.studyModeRandom}&gt;{uiTexts.studyModeRandom}&lt;/option&gt; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;option value={uiTexts.studyModeGuided}&gt;{uiTexts.studyModeGuided}&lt;/option&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/select&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleGenerateQuestion} disabled={isPracticeLoading || (!studyContentText &amp;&amp; !studyContentImage)} className=&quot;w-full bg-blue-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition transform hover:scale-105 mb-4 disabled:opacity-50&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(isPracticeLoading &amp;&amp; currentQuestion === &#39;&#39; &amp;&amp; !feedbackMessage) ? uiTexts.generatingQuestionButton : uiTexts.generateQuestionButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {currentQuestion &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-blue-50 p-4 rounded-lg border border-blue-200 text-blue-800 font-medium text-lg mb-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ReactMarkdown&gt;{currentQuestion}&lt;/ReactMarkdown&gt; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {currentConcept &amp;&amp; (Object.keys(uiTexts).find(k =&gt; uiTexts[k] === studyMode &amp;&amp; k.startsWith(&#39;studyMode&#39;)) ? baseUiTexts[Object.keys(uiTexts).find(k =&gt; uiTexts[k] === studyMode &amp;&amp; k.startsWith(&#39;studyMode&#39;))] : studyMode) === baseUiTexts.studyModeGuided &amp;&amp; &lt;p className=&quot;text-sm text-blue-600 mt-1&quot;&gt;(Concepto cubierto: {currentConcept})&lt;/p&gt;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label htmlFor=&quot;userAnswer&quot; className=&quot;block text-lg font-medium text-gray-700 mb-2&quot;&gt;{uiTexts.yourAnswerLabel}&lt;/label&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;textarea id=&quot;userAnswer&quot; className=&quot;w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 resize-y min-h-[80px] mb-4&quot; placeholder={uiTexts.yourAnswerPlaceholder} value={userAnswer} onChange={(e) =&gt; setUserAnswer(e.target.value)} disabled={!currentQuestion || isPracticeLoading}&gt;&lt;/textarea&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleEvaluateAnswer} disabled={!currentQuestion || !userAnswer || isPracticeLoading} className=&quot;w-full bg-green-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition transform hover:scale-105 mb-4 disabled:opacity-50&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isPracticeLoading &amp;&amp; feedbackMessage === &#39;&#39; &amp;&amp; currentQuestion !== &#39;&#39; ? uiTexts.evaluatingButton : uiTexts.checkAnswerButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {feedbackMessage &amp;&amp; &lt;div className=&quot;bg-yellow-50 p-4 rounded-lg border border-yellow-200 text-yellow-800 font-medium mb-4&quot;&gt;&lt;ReactMarkdown&gt;{feedbackMessage}&lt;/ReactMarkdown&gt;&lt;/div&gt;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex flex-col sm:flex-row gap-4 mt-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(currentQuestion || feedbackMessage) &amp;&amp; conceptToElaborate &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleElaborateConcept} disabled={isElaborationLoading || (!studyContentText &amp;&amp; !studyContentImage)} className=&quot;flex-1 bg-indigo-500 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg shadow-md hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 text-sm sm:text-base&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isElaborationLoading ? uiTexts.explainingButton : uiTexts.explainMoreButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(currentQuestion || feedbackMessage) &amp;&amp; conceptToElaborate &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleGenerateAnalogies} disabled={isAnalogyLoading || (!studyContentText &amp;&amp; !studyContentImage)} className=&quot;flex-1 bg-orange-500 text-white py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg shadow-md hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 text-sm sm:text-base&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isAnalogyLoading ? uiTexts.creatingAnalogiesButton : uiTexts.createAnalogiesButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex justify-around items-center mt-6 mb-2 text-lg sm:text-xl font-bold&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-green-600&quot;&gt;{uiTexts.correctLabel} {correctCount}&lt;/p&gt; &lt;p className=&quot;text-red-600&quot;&gt;{uiTexts.incorrectLabel} {incorrectCount}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {activeTab === &#39;reporte&#39; &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;h2 className=&quot;text-xl sm:text-2xl font-semibold text-blue-600 mb-4 sm:mb-5&quot;&gt;{uiTexts.reportTitle}&lt;/h2&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onClick={handleGenerateReport} disabled={sessionHistory.length === 0 || isPracticeLoading} className=&quot;w-full bg-purple-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition transform hover:scale-105 mb-6 disabled:opacity-50&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isPracticeLoading &amp;&amp; !reportContent ? uiTexts.generatingReportButton : uiTexts.generateReportButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {(reportContent || suggestionsContent) &amp;&amp; sessionHistory.length &gt; 0 ? (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;mt-2 bg-gray-50 p-3 sm:p-4 rounded-lg border border-gray-200&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {reportContent &amp;&amp; &lt;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-lg sm:text-xl font-semibold text-gray-700 mb-3&quot;&gt;{uiTexts.reportResultsTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose prose-sm sm:prose-base max-w-none mb-4&quot;&gt;&lt;ReactMarkdown&gt;{reportContent}&lt;/ReactMarkdown&gt;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/&gt;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {suggestionsContent &amp;&amp; &lt;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-lg sm:text-xl font-semibold text-gray-700 mt-4 mb-3&quot;&gt;{uiTexts.studySuggestionsTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose prose-sm sm:prose-base max-w-none&quot;&gt;&lt;ReactMarkdown&gt;{suggestionsContent}&lt;/ReactMarkdown&gt;&lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/&gt;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) : (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sessionHistory.length &gt; 0 &amp;&amp; !isPracticeLoading &amp;&amp; &lt;p className=&quot;text-gray-600&quot;&gt;{uiTexts.clickToGenerateReportMsg}&lt;/p&gt; ||</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sessionHistory.length === 0 &amp;&amp; &lt;p className=&quot;text-gray-600&quot;&gt;{uiTexts.completeQuestionsForReportMsg}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; { showCustomModal(uiTexts.confirmRestartMsg, true);}} className=&quot;w-full mt-8 bg-red-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition transform hover:scale-105&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {uiTexts.restartSessionButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {!isFocusMode &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;footer className=&quot;w-full max-w-3xl text-center py-6 sm:py-8 mt-6 sm:mt-8 text-xs sm:text-sm text-gray-600&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;mb-2&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href=&quot;https://labia.tiddlyhost.com&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; className=&quot;hover:text-blue-600 underline&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Laboratorio de aplicaciones educativas</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;mb-2&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Aplicaci&oacute;n creada a partir de la original hecha por &lt;a href=&quot;https://bilateria.org&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; className=&quot;hover:text-blue-600 underline&quot;&gt;Juan Jos&eacute; de Haro&lt;/a&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href=&quot;https://creativecommons.org/licenses/by-sa/4.0/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; className=&quot;hover:text-blue-600 underline&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Esta obra est&aacute; bajo una licencia Creative Commons BY-SA</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/footer&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {/* Modals */}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showModal &amp;&amp; modalRequiresConfirmation &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white p-6 rounded-lg shadow-xl max-w-md w-full text-center&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-lg font-semibold mb-6&quot;&gt;{modalMessage}&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {modalMessage === uiTexts.confirmRestartMsg ? (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex justify-around&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; { handleRestartSession(); setShowModal(false); }} className=&quot;bg-red-500 text-white py-2 px-6 rounded-lg hover:bg-red-600 transition&quot;&gt;{uiTexts.yesRestartButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowModal(false)} className=&quot;bg-gray-300 text-gray-700 py-2 px-6 rounded-lg hover:bg-gray-400 transition&quot;&gt;{uiTexts.cancelButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) : (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowModal(false)} className=&quot;bg-blue-500 text-white py-2 px-6 rounded-lg hover:bg-blue-600 transition&quot;&gt;{uiTexts.acceptButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showDescriptionModal &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-[60] p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white p-0 rounded-lg shadow-xl max-w-2xl w-full max-h-[85vh] flex flex-col&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div dangerouslySetInnerHTML={{ __html: descriptionModalStyles }} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-xl sm:text-2xl font-semibold text-blue-700&quot;&gt;{uiTexts.descriptionModalTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowDescriptionModal(false)} className=&quot;text-gray-500 hover:text-gray-700 text-3xl leading-none font-bold&quot; aria-label=&quot;Cerrar descripci&oacute;n&quot;&gt;&amp;times;&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;p-4 overflow-y-auto&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;DescriptionModalContentComponent uiTexts={uiTexts} /&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div className=&quot;flex justify-end p-3 border-t sticky bottom-0 bg-white z-10&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowDescriptionModal(false)} className=&quot;bg-blue-500 text-white py-2 px-6 rounded-lg hover:bg-blue-600 transition&quot;&gt;{uiTexts.closeButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showSummaryModal &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white p-6 rounded-lg shadow-xl max-w-lg w-full&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-xl sm:text-2xl font-semibold text-teal-600 mb-4&quot;&gt;{uiTexts.summaryModalTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose prose-sm sm:prose-base max-w-none max-h-[50vh] overflow-y-auto mb-6 p-3 bg-gray-50 rounded-md border&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ReactMarkdown&gt;{smartSummary}&lt;/ReactMarkdown&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex flex-col sm:flex-row gap-3&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onClick={handleCopySummary} className=&quot;flex-1 bg-sky-500 text-white py-2 px-4 rounded-lg hover:bg-sky-600 transition&quot;&gt;{uiTexts.copySummaryButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowSummaryModal(false)} className=&quot;mt-4 w-full bg-gray-400 text-white py-2 px-4 rounded-lg hover:bg-gray-500 transition&quot;&gt;{uiTexts.closeButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showFaqModal &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white p-6 rounded-lg shadow-xl max-w-xl w-full&quot;&gt; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-xl sm:text-2xl font-semibold text-cyan-600 mb-4&quot;&gt;{uiTexts.faqModalTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose prose-sm sm:prose-base max-w-none max-h-[60vh] overflow-y-auto mb-6 p-3 bg-gray-50 rounded-md border&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ReactMarkdown&gt;{faqContent}&lt;/ReactMarkdown&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex flex-col sm:flex-row gap-3&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onClick={handleCopyFaq} className=&quot;flex-1 bg-sky-500 text-white py-2 px-4 rounded-lg hover:bg-sky-600 transition&quot;&gt;{uiTexts.copyFaqButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowFaqModal(false)} className=&quot;mt-4 w-full bg-gray-400 text-white py-2 px-4 rounded-lg hover:bg-gray-500 transition&quot;&gt;{uiTexts.closeButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showElaborationModal &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white p-6 rounded-lg shadow-xl max-w-lg w-full&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-xl sm:text-2xl font-semibold text-indigo-600 mb-2&quot;&gt;{uiTexts.elaborationModalTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;{uiTexts.elaborationModalConceptLabel} &quot;{conceptToElaborate}&quot;&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose prose-sm sm:prose-base max-w-none max-h-[50vh] overflow-y-auto mb-6 p-3 bg-gray-50 rounded-md border&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ReactMarkdown&gt;{elaboratedExplanation}&lt;/ReactMarkdown&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex flex-col sm:flex-row gap-3&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleCopyElaboration} className=&quot;flex-1 bg-sky-500 text-white py-2 px-4 rounded-lg hover:bg-sky-600 transition&quot;&gt;{uiTexts.copyElaborationButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowElaborationModal(false)} className=&quot;mt-4 w-full bg-indigo-500 text-white py-2 px-4 rounded-lg hover:bg-indigo-600 transition&quot;&gt;{uiTexts.closeButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showAnalogyModal &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white p-6 rounded-lg shadow-xl max-w-lg w-full&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-xl sm:text-2xl font-semibold text-orange-600 mb-2&quot;&gt;{uiTexts.analogyModalTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-sm text-gray-600 mb-4&quot;&gt;{uiTexts.elaborationModalConceptLabel} &quot;{conceptToElaborate}&quot;&lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose prose-sm sm:prose-base max-w-none max-h-[50vh] overflow-y-auto mb-6 p-3 bg-gray-50 rounded-md border&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ReactMarkdown&gt;{analogiesContent}&lt;/ReactMarkdown&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex flex-col sm:flex-row gap-3&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleCopyAnalogies} className=&quot;flex-1 bg-sky-500 text-white py-2 px-4 rounded-lg hover:bg-sky-600 transition&quot;&gt;{uiTexts.copyAnalogiesButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowAnalogyModal(false)} className=&quot;mt-4 w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition&quot;&gt;{uiTexts.closeButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showFlashcardModal &amp;&amp; flashcardsData.length &gt; 0 &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white p-6 rounded-lg shadow-xl w-full max-w-md flex flex-col&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-xl sm:text-2xl font-semibold text-amber-600 mb-4 text-center&quot;&gt;{uiTexts.flashcardsModalTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;flashcard-container bg-amber-100 border-2 border-amber-400 rounded-lg min-h-[200px] flex justify-center items-center p-6 mb-4 cursor-pointer select-none perspective&quot; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={() =&gt; setIsFlashcardFlipped(!isFlashcardFlipped)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className={`flashcard-inner ${isFlashcardFlipped ? &#39;is-flipped&#39; : &#39;&#39;}`}&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flashcard-front rounded-lg&quot;&gt; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose max-w-none&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ReactMarkdown&gt;{flashcardsData[currentFlashcardIndex].front}&lt;/ReactMarkdown&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flashcard-back rounded-lg&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;prose max-w-none&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ReactMarkdown&gt;{flashcardsData[currentFlashcardIndex].back}&lt;/ReactMarkdown&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p className=&quot;text-center text-gray-600 mb-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {uiTexts.flashcardOf.replace(&#39;{current}&#39;, currentFlashcardIndex + 1).replace(&#39;{total}&#39;, flashcardsData.length)}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/p&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex justify-between mb-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handlePrevFlashcard} className=&quot;bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition&quot;&gt;{uiTexts.prevFlashcardButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleShuffleFlashcards} className=&quot;bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition&quot;&gt;{uiTexts.shuffleFlashcardButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={handleNextFlashcard} className=&quot;bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition&quot;&gt;{uiTexts.nextFlashcardButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowFlashcardModal(false)} className=&quot;w-full bg-amber-500 text-white py-2 px-4 rounded-lg hover:bg-amber-600 transition&quot;&gt;{uiTexts.closeFlashcardsButton}&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {showSemanticMapModal &amp;&amp; semanticMapData &amp;&amp; (</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;fixed inset-0 bg-gray-800 bg-opacity-80 flex justify-center items-center z-[70] p-2 sm:p-4&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;bg-white rounded-xl shadow-2xl w-full max-w-3xl h-[90vh] sm:h-[85vh] flex flex-col overflow-hidden&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;flex justify-between items-center p-3 sm:p-4 border-b bg-gray-50&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 className=&quot;text-lg sm:text-xl font-semibold text-purple-700&quot;&gt;{uiTexts.semanticMapModalTitle}&lt;/h3&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onClick={() =&gt; setShowSemanticMapModal(false)} className=&quot;text-gray-500 hover:text-gray-700 text-2xl sm:text-3xl leading-none font-bold&quot; aria-label=&quot;Cerrar mapa conceptual&quot;&gt;&amp;times;&lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div ref={networkRef} className=&quot;flex-grow w-full h-full bg-gray-100&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {isSemanticMapLoading &amp;&amp; !semanticMapData &amp;&amp; &lt;p className=&quot;text-center p-10 text-gray-600 animate-pulse&quot;&gt;Generando mapa...&lt;/p&gt;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div className=&quot;p-3 sm:p-4 border-t bg-gray-50 flex flex-col sm:flex-row justify-end gap-2 sm:gap-3&quot;&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={handleDownloadMapHTML} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;bg-blue-500 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-600 transition text-sm sm:text-base disabled:opacity-60&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {uiTexts.downloadHtmlButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onClick={() =&gt; setShowSemanticMapModal(false)} </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; className=&quot;bg-gray-400 text-white py-2 px-4 rounded-lg shadow hover:bg-gray-500 transition text-sm sm:text-base&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {uiTexts.closeButton}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )}</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;style&gt;{`</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::selection {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: #3b82f6; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: white;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::-moz-selection { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: #3b82f6;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: white;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .perspective { perspective: 1000px; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-inner.is-flipped { transform: rotateY(180deg); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-front, .flashcard-back { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; position: absolute; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width: 100%; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; height: 100%; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -webkit-backface-visibility: hidden; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; backface-visibility: hidden; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; display: flex; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flex-direction: column; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; justify-content: center; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; align-items: center; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; padding: 20px; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; box-sizing: border-box;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: #fef3c7 !important; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; border-radius: 0.5rem; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: #374151; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-front &gt; div, .flashcard-back &gt; div,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-front p, .flashcard-back p,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-front span, .flashcard-back span { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: transparent !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-front &gt; div &gt; p, .flashcard-back &gt; div &gt; p { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; margin: 0; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .flashcard-back { transform: rotateY(180deg); }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .prose :where(p):where([class~=&quot;lead&quot;]) { margin-top: 0; margin-bottom: 0; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .prose :where(p):not(:where([class~=&quot;not-prose&quot;] *)) { margin-top: 0; margin-bottom: 0; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .vis-tooltip {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: #ffffff !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; border: 1px solid #cccccc !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; box-shadow: 0 2px 8px rgba(0,0,0,0.15) !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; padding: 10px !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; border-radius: 6px !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font-family: &#39;Inter&#39;, Arial, sans-serif !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: #333333 !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font-size: 13px !important;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max-width: 300px !important; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pointer-events: none !important; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `}&lt;/style&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; );</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">export default App;</span></p></body></html>